<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<html>
<head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<title>The publishing TeX (kanjicode)</title>
</head>
<body bgcolor="#F5F5DC">

<h2>漢字コードについて</h2>

<hr>
<h3>■入力コードと出力コード</h3>
pTeXが扱える漢字コードは、pTeXの実行ファイルを作成するときに決定されます。
それは、pTeXを起動したときに表示されるバナーに示されています。
<pre>
    This is pTeX, Version 3.1415 p2.1 (EUC) (C version 6.1)
</pre>
バージョンp3.0.4以降では、実行時に-kanjiオプションを指定することで、
pTeXが読み込める漢字コードを変更することができます。
このとき、カッコ内には-kanjiオプションに指定された（省略時はデフォルトの）
漢字コードが表示されます。
<pre>
    This is pTeX, Version 3.1415-p3.0.4 (euc) (Web2C 7.3.9)
</pre>
<p>
バナーのカッコ内に表示される文字列と、
入力可能な漢字コード、出力される漢字コードは次のようになっています。

<blockquote>
<table border="1">
<tr><td></td><td colspan="3">バナーに表示される文字列</td></tr>
<tr><td></td>          <td>EUC</td>    <td>SJIS</td>    <td>JIS</td></tr>
<tr><td>内部コード</td><td>EUC</td>    <td>SJIS</td>    <td>EUC</td></tr>
<tr><td>入力コード</td><td>EUC/JIS</td><td>SJIS/JIS</td><td>JIS/EUC</td></tr>
<tr><td>出力コード</td><td>EUC</td>    <td>SJIS</td>    <td>JIS</td></tr>
</table>
</blockquote>

入力コードは、原稿ファイルやクラスファイル、パッケージファイルなどでの
漢字コードです。-kanjiオプションにeucまたはjisを指定した場合は、
EUCとJISコードのファイルを扱えます。-kanjiオプションにsjisを指定した場合は、
シフトJISとJISコードのファイルを扱えます。
<p>
出力コードは、ログファイルやauxファイル、画面に出力されるメッセージで
使われる漢字コードです。-kanjiオプションに指定をした漢字コードが使われます。
<p>
なお、DVIファイルへはつねにJISコードで出力されます。

<hr>
<h3>■カテゴリコード</h3>
pTeXでは、２バイトコードのカテゴリコードを、つぎのように設定しています。

<pre>
    カテゴリ                 意味
       16      第一、第二水準の漢字（16区〜84区の文字）
       17      カナ、アルファベットなど（3区〜6区の文字）
       18      その他の和文記号（1,2,7,8区の文字）
</pre>

なお、pTeXでは、２バイト文字のカテゴリコードを変更することはできません。
なぜなら、pTeXは２バイト文字のカテゴリコードを、その文字の１バイト目で
判断していますが、つぎのように、シフトJISコードの１バイト目が必ずしも、
区点コードの`区'に対応していないためです。
そのため、仮に区単位でカテゴリコードを変更できるようにしても、
SJIS版とEUC版で同じ動作が保証できなくなります。
内部コードを統一すれば不可能ではありませんが、現在は見送っております。

<pre>
     　　　　　　　　区点       JIS        EUC        シフトJIS    区
     特殊文字　　　　0101-0294, 2121-227e, a1a1-a2fe, 8140-81fc,  1,2
     英数字　　　　　0316-0390, 2330-237a, a3b0-a3fa, 824f-829a,  3
     平仮名　　　　　0401-0483, 2421-2473, a4a1-a4f3, 829f-82f1,  4
     片仮名　　　　　0501-0586, 2521-2576, a5a1-a5f6, 8340-8396,  5
     ギリシャ文字　　0601-0656, 2621-2658, a6a1-a6d8, 839f-83d6,  6
     ロシア文字　　　0701-0781, 2721-2771, a7a1-a7f1, 8440-8491,  7
     罫線素片　　　　0800-0833, 2821-2841, a8a1-a8c1, 849f-84bf,  8
     第１水準漢字　　1601-4751, 3021-4f53, b0a1-cfd3, 889f-9872,  16-47
     第２水準漢字　　4801-8404, 5021-7424, d0a1-f4a4, 989f-ea92,  48-84
</pre>

<p>
<hr>
<a href="../index.html">[pTeX home page]</a>
<hr>
<!--#include virtual="/ssi/analytics.html" -->
</body>
</html>
