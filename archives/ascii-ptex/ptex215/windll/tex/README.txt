************************************************************************
                        TeX DLL for Windows 95/NT
                               TeX 3.14159
                             ASCII pTeX 2.1.5
                            Web2c version 7.0
                             DLL version 1.0.2
                  Copyright (C) 1997, Kazunori Asayama

                         はじめにお読みください

************************************************************************


1). はじめに

  TeX 処理系の WIN32 DLL 版です。Web2c 7.0 及び ASCII pTeX 2.1.5 をベー
スにしています。

  この DLL を利用した、コマンドラインベースのプログラム (initex.exe 等)
及びサンプル GUI が付属しています。


2). 動作環境

  Intel 系 32 bit Windows で動作しますが、Windows 3.x 上の Win32s は
対象外です。マルチスレッド等の機能を利用していますのでそれらをサポート
していない Win32s 環境では絶対に動作しません。

  Windows NT 3.5 での動作確認は行なっていません。動かない場合で
もサポートの予定はありません。また、Windows NT 3.51 での動作も
期待されて開発されていますが、動作確認はおこなわれていません。

  動作確認は以下の環境 (いずれも日本語版, AT 互換機) でおこなってあり
ます。
  
    ・Windows 95
    ・Windows NT Workstation 4.0 Service Pack 3

  ハードウェアは、最低ラインとしては「Intel 系 32 bit Windows が動作する
コンピュータ本体」で「十分な (30 MB 程度) ディスクの空きがある」
環境ですが、実用的な運用を考えると以下の仕様以上の環境を推奨します。

    ・Pentium 90 MHz 以上の CPU
    ・物理メモリの空き 6 〜 10 MB 程度 (TeX や METAFONT をスワップなしに
      実行できるメモリの空き)
    ・ハードディスク (インストール先) の空き 50 MB 以上 (MO はお勧めしません)

  物理メモリについては、Windows 95 ならば、32 MB、Windows NT Workstation
ならば 64 MB 程度を搭載しているコンピュータであれば、上記の条件を満たす
ことは容易でしょう。


3). パッケージ構成

  このパッケージは以下のファイルから構成されています。◎ は必須、○ は
オプショナルです。

  ◎ README.txt      このファイル
  ◎ Changes.txt     変更履歴
  ◎ setup.exe       インストーラ
  ◎ _setup.tsm      インストーラが利用するセットアップ情報
  ○ texdll0.zip     DLL のソースコード
  ◎ texdll1.zip     DLL 本体 1 (文書, VC++ ランタイム, etc)
  ◎ texdll2.zip     DLL 本体 2 (DLL, CUI, GUI)
  ◎ lib.zip         TeX 標準ライブラリ (texmflib-7.2.tar.gz 相当)
  ◎ plib.zip        ASCII pTeX 標準ライブラリ (plib13-sj.tar.gz 相当)
  ○ latex.zip       LaTeX2e マクロ
  ○ platex.zip      ASCII pLaTeX2e マクロ
  ○ ltxpkg.zip      LaTeX2e Packages マクロ
                     (AMS LaTeX, Graphics, Tools, Babel, MF NFSS, PS NFSS)
  ○ dvips.zip       dvipsk 5.66a
  ○ vf-a2bk.zip     dvipsk 5.66a 用日本語仮想フォント
  ○ kpsemomo.zip    桃薗版 Kpathsea DLL のソースコード

  拡張子 .zip のファイル及び _setup.tsm は、アーカイバ zip (Info-Zip) 
を用いて作成されています (_setup.tsm は、拡張子が .exe ではありません
が、zip による自己展開形式の書庫です。拡張子を .exe に変更し、実行する
ことにより直接中身を取り出せます)。何らかの理由でこれらのファイルから
インストーラを使わずにファイルを取り出す必要が生じた場合には、unzip ま
たは互換のアーカイバを用いてください。ただし、長いファイル名を使ってファ
イルを格納してありますので、長いファイル名が扱えるアーカイバを用いてく
ださい (c.f. 第 8 節)。

  開発者用コードは texdll1.zip 及び texdll2.zip 内のディレクトリ
develop 以下に含まれています。インストール時に「開発者用コード」を選択
せず、あとから必要になった場合には一般のアーカイバを用いてファイルを
取り出してください。

  ライブラリ (lib.zip, plib.zip, latex.zip, platex.zip, ltxpkg.zip) に
関してはオリジナルのもの (texmflib-7.2.tar.gz 等) を用いることも出来ます。
この場合、インストーラの「モジュールの選択」で「ライブラリ」
「ASCII PTeX ライブラリ」などのチェックボックスのチェックをはずしてくだ
さい。このとき、texmflib-7.2.tar.gz などは自分でインストールする必要が
あります。


4). インストール

  インストールは以下の手順でおこなってください。

    1.  ファイルを用意します。

      すべての書庫 (*.zip)、インストーラ (setup.exe と _setup.tsm) を
      同一フォルダに置く (リードオンリーのドライブ上のフォルダでもかまいま
      せん)。

    2. setup.exe を実行する。setup.exe の指示にしたがってください。

    ※ Windows NT にインストールする場合には必ずアドミニストレータの
       権限を持ったアカウントで作業をしてください。インストールには
       ファイルおよびレジストリのアクセス権の設定をおこなう作業が含まれ
       ます。Windows NT で、アドミニストレータグループに含まれていない
       アカウントでインストーラを起動した場合、強制的に処理が中止されます。

       Windows 95 (またはその後継バージョン) ではどのユーザーアカウントで
       作業してもかまいません。

    ※ リムーバブルディスクへのインストールはお勧めしません。リムーバブル
       ディスクへのインストールも配慮してセットアッププログラムは作成されて
       いますが、実運用でいくつかの制限が生じます。

    ※ インストールは付属のインストーラ (付属のsetup.exe) を使って
       おこなってください。一般のアーカイバを使って書庫を展開しても
       正しく環境設定 (レジストリデータベースの登録など) が行われません。

    ※ どうしてもインストーラを使いたくない場合には以下の手順に
       したがってください。

         a). 一般のアーカイバ (長いファイル名に対応したもの) を用いて
             適切なディレクトリにファイルを展開する。
         b). texdll1.zip に含まれる doc\win32dll\registry\*.reg を適切に
             編集する。とりあえずは以下の値を編集しておけばよい。

             Key: HKEY_LOCAL_MACHINE\Software\momo\Kpathsea\Config\TEXMF
             Value: "" (標準)

             Key: HKEY_LOCAL_MACHINE\Software\Kazunori Asayama\TeX DLL
             Value: "Path"

         c). b). で編集した *.reg をエクスプローラなどからダブルクリックして
             レジストリデータベースに登録する。
         d). 環境変数 PATH を設定する (必要に応じて、コンピュータを
             再起動する)。
         e). フォーマットファイルを作成する。
         f). GUI の設定などを必要に応じて行う。

       なお、この方法に関する質問等は一切受け付けません。
       doc\win32dll\registry.txt などを参考に自力で解決してください。


5). アンインストール

  アンインストールは以下の手順で行います (あまり手軽な方法ではありません)。

  1. レジストリのハイブ HKEY_LOCAL_MACHINE 及び
     HKEY_CURRENT_USER (すべてのユーザについて) の以下のキーのうち
     存在するものを削除する。

       Software\Kazunori Asayama\TeX DLL
       Software\Kazunori Asayama\TeX CUI
       Software\Kazunori Asayama\TeX for MS-Windows
       Software\momo\Kpathsea
       Software\Microsoft\CurrentVersion\App Paths\KWinTeX.exe

     TeX DLL パッケージが変更を加えるレジストリキーはこれらのみです。

  2. インストール時に指定したフォルダ以下のファイルをすべて削除する。

  3. TeX のプログラムフォルダを削除する。

  4. 環境変数 PATH から不要なもの (TeX の *.exe があるディレクトリ) を
     削除する。


6). カスタマイズ

  このパッケージに含まれるプログラムなどは、ユーザの好みにあわせて
動作をある程度カスタマイズすることが可能です。カスタマイズには付属の
texcust.exe (「カスタマイズ」アイコン) を用いてください。


7). コマンドライン版について

  コマンドライン版の TeX (インストール先ディレクトリの bin にある tex.exe など)
は、以下のようにすることでフォーマットファイルを追加できます。

  1.  tex.exe (ASCII pTeX の場合には ptex.exe、METAFONT は mf.exe、MetaPost は
      mpost.exe) を、新たに作成したいフォーマットファイルのファイル名の拡張子を
      .exe にしたファイル名で tex.exe と同じディレクトリにコピーする。

  2. フォーマットファイルを作成し、インストール先のディレクトリ texmf\web2c に
     置く。フォーマットファイルは 1. で作成したファイルに --ini オプション
     (IniTeX として動作させることを表すオプション) を付けて起動して作成する
     (たとえば "latex209 --ini lplain.tex \dump")。


8). 使用許諾・著作権・配布について

  このパッケージに含まれるファイルの DLL 化に関する部分の著作権は作者
である淺山が保有します。詳しくは texdll1.zip の 
doc\win32dll\LICENSE.txt をご覧ください。

  このパッケージのセットアッププログラムは Info-ZIP グループによる
unzip32.dll (_setup.tsm に収録) を利用しています。また、このパッケージ
を構成する書庫の作成には同グループの zip を用いています。これらのオリ
ジナルのコードはそのソースコードを含め、以下をはじめとするさまざまな 
BBS、 ftp サイト、WWW サイトなどから無料で入手できます。

    ftp://ftp.cdrom.com/pub/infozip/
    CompuServe IBMPRO forum

  また、関連情報は Info-ZIP グループの WWW サイトである以下から入手で
きます。

    http://www.cdrom.com/pub/infozip/

  詳しくは texdll1.zip に含まれる doc\Info-ZIP\Copying.txt 及び
doc\Info-ZIP\Where.txt をご覧ください。


9). 最新パッケージ及び情報の入手方法

  このパッケージの一次頒布元の URL は以下のとおりです。

    ftp://ftp.ascii.co.jp/pub/TeX/ascii-ptex/ptex215/windll/tex/

また、アスキー pTeX に関する最新の情報は以下の URL から入手できます。

    http://www.ascii.co.jp/pb/ptex/


10). 備考

  a). TeX / METAFONT が使用する *.pool は DLL 本体に組み込んでいますので
      必要ありません。

  b). 漢字のファイル名や空白文字を含むファイル名は基本的に使えないと
      考えて下さい(漢字に関しては使えない文字があるという程度で全く使えない
      わけではないのですが一般的には「使えない」と考えておいた方が無難です)。
      ただし、ファイルの探索パスに含まれる漢字、空白文字は問題なく扱えます
      (つまり、コマンドラインから与えるファイル名に漢字や空白文字が含まれて
      いなければよい)。pTeX に関しては漢字を含むファイル名が完全に
      使えるように作成されていますがその他のサポートツールの多くは
      漢字のファイル名が扱えません。従って漢字のファイル名は使わないように
      しておくのが無難です。

  c). TeX DLL 自体は環境変数を全く参照しません。オリジナルで環境変数を
      参照するようになっていた部分は全てレジストリを用いるように変更を
      加えてあります (インストーラや GUI を作ることを考えればこのほうが
      いいでしょうから)。参照・設定されるレジストリに関しては付属の
      registry.txt をご覧ください。

  d). MFtoPK は VirMF と GFtoPK を組み合わせたプログラムです。
      VirMF を使った場合と比べて、出力が GF の代わりに PK になると
      考えて下さい。それ以外の機能上の相違はありません。

  e). Kpathsea ライブラリは、桃薗さんによります。

  f). パッケージに含まれている文書は、Explorer などから楽に閲覧できるように
      拡張子を .txt に変えるか .txt を付加してあります。また、同時に
      notepad.exe でもまともに見ることができるように、改行コードを
      MS-DOS 形式 (CR+LF) に変換してあります。

      ただし、TeX のマクロやソースコードなどは改行コードの変換は
      行っていません (数が膨大なので (^^;)。

  g). 付属のインポートライブラリ (開発者向けコードに含まれる拡張子 .lib の
      ファイル) は MS VC++ 4.x, 5.x 用です。

  h). 今後は TeX 本体関連のソフトウェアのメンテナンスはこの DLL 版だけに
      するつもりでいます。これは MS-DOS 環境や Win 3.x で TeX を使っている
      ユーザのことは今後考慮しないということです。Win95 や WinNT 3.51 以降に
      乗り換えて下さい :-)

  i). インストーラはある程度プログラマブルに作ってありますが、
      説明が面倒なので (^^; その書式は文書化していません。*.lst を
      読んで想像してください :-)

  j). dvipsk の構成モジュールである DLL は、似非 (^^; DLL です。
      グローバル変数やスタティック変数の初期化をしていないので
      1 プロセス中で 1 回しか使えません。そのうちきちんとした DLL に
      したいと思っていますが、期待はしないでください :-)

  k). インストール後にインストール先 (あるいはその親の) ディレクトリ名を
      変更したり、ディレクトリを移動したりすることは避けてください。
      レジストリへの登録内容と実際のディレクトリ構成が一致しなくなり
      動作しなくなります。そのような必要がある場合には、再インストールを
      するようにしてください (レジストリをレジストリエディタで数箇所
      直接編集すれば再インストールをしなくてもいいのですが危ないので
      その方法はあえて公開しません)。

  l). 付属のライブラリ (lib.zip) の内容は、オリジナルの Web2c 7.0 用の
      texmflib-7.2.tar.gz と「ほぼ」同じです。異なる点は、
      LaTeX (LaTeX2e) が含まれていないということ、旧版 LaTeX (LaTeX 2.09) が
      含まれているということ、AMS フォント等いくつかのファイルが追加されて
      いるということのみです。LaTeX が含まれていないのは LaTeX を別ファイル
      (latex.zip) として提供するようにしたためです。LaTeX は定期的に
      バージョンアップされますのでそのときの差し替えが容易に出来るように
      このような形態になっています。

  m). 付属の PTeX ライブラリ (plib.zip) の内容は、オリジナルの
      plib13-sj.tar.gz に旧 pLaTeX (pLaTeX 2.09) 及び ASCII 日本語 LaTeX を
      追加した内容になっています。


11). 謝辞

  バグの絶えないこのパッケージのデバッグに懲りずに付き合ってくださった
某メーリングリストの方々に感謝します。

  Kpathsea DLL を改良してくださり、私のわがままをいろいろと聞きいれて
くださった桃薗さんに感謝します。


---
淺山 和典 (ASAYAMA Kazunori)
asayama@vsp.cpg.sony.co.jp
GHF01532@niftyserve.or.jp
TPM03937@pcvan.or.jp
********************************** EOF *********************************
