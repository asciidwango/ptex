ftp.cs.umb.edu:/pub/tex/web2c.kpathsea-2.6.help, 9jan95.

The version of kpathsea distributed with web2c-6.1 is kpathsea-1.8.
It was released in April 1994.  The current version of kpathsea,
kpathsea-2.6, has faster path searching, runtime configuration files,
bug fixes, and other improvements (see kpathsea/NEWS).  Karl Berry
will put out a new release of web2c in a month or so, but those who
cannot wait to use the current version of kpathsea will find some help
in this file.

You do not have to follow the instructions below to build web2c-6.1;
it will build perfectly fine with the old kpathsea-1.8.  You should
follow these instructions only if you want to take advantage of the
new features in kpathsea-2.6 and you don't want to wait for the next
release of web2c.  If you run into any problems, you will have to
debug and fix them yourself.  You may send a message to the
tex-k@cs.umb.edu mailing list if you need some more help, but do not
expect to receive an answer unless someone who reads the list has
encountered your problem before and takes the time to write a reply.

Follow these instructions to upgrade web2c-6.1 to kpathsea-2.6:

1.  Fetch the tar files `web-6.1.tar.gz' and `web2c-6.1.tar.gz' from
    your nearest CTAN archive.

2.  Fetch as many of the following tar files, `dviljk-2.5.tar.gz',
    `dvipsk-5.58f.tar.gz', and `xdvik-18f.tar.gz', as you need from
    ftp://ftp.cs.umb.edu/private/tex.  They all contain the same
    version of kpathsea so you can fetch whatever you want to build
    in addition to web2c-6.1 (say, dvipsk-5.58f).

3.  Unpack all of the tar files in the same directory.  You will have
    several new directories: web2c-6.1 and one or more of dviljk-2.5,
    dvipsk-5.58f, and xdvik-18f depending on how many tar files you
    chose in step 2.

4.  Pick any of the directories dviljk-2.5, dvipsk-5.58f, or
    xdvik-18f and rename it to kpathsea-2.6:

    mv dvipsk-5.58f kpathsea-2.6

5.  Combine all the rest of the programs you want to build into
    kpathsea-2.6:

    mv dviljk-2.5/dviljk kpathsea-2.6
    mv web2c-6.1/web2c kpathsea-2.6
    mv xdvik-18f/xdvik kpathsea-2.6

6.  You don't need the remaining files in web2c-6.1 or any of the
    other directories besides kpathsea-2.6, so you can delete them if
    you wish:

    rm -rf dviljk-2.5
    rm -rf web2c-6.1
    rm -rf xdvik-18f

7.  Patch a few files in the web2c subdirectory.  The patch is
    enclosed.  First move into kpathsea-2.6 and then apply the patch:

    cd kpathsea-2.6
    patch -p -s < web2c.kpathsea-2.6.help

    You shouldn't get any output from the patch command unless an
    error occurs.

    This patch was made so that it won't matter what you call the
    directory containing the web2c subdirectory since you'll be inside
    it before applying the patch.  If you don't like the name
    kpathsea-2.6, you're welcome to pick another name in step 4.

8.  You will have to edit the fmts variable in web2c/Makefile.in if
    you want to build another format besides tex.fmt.  If you want to
    build the latex format in `make -k all' below, you must have all
    of the latex files installed somewhere in your TEXINPUTS (usually
    /usr/local/lib/texmf/tex/latex209 or /usr/local/lib/tex/latex2e).
    You may prefer to build and install TeX and MF first and then
    build and install the most up to date latex files and format from
    another directory.  After you finish step 9, ftp to your nearest
    CTAN archive, fetch base.tar.gz and package.tar.gz from the
    directory /tex-archive/macros/latex, unpack them, and read the
    instructions therein for building the most up to date latex.

9.  Now you are ready to build all of the programs that you've moved
    into kpathsea-2.6 (dviljk, dvipsk, web2c, xdvik, etc.):

    cd kpathsea-2.6
    ./configure
    make -k all
    make install

    Note that you can't say `make -k'; you have to say `make -k all'
    to build the formats and man pages as well as the executables.

*** web2c/Makefile.in.save	Thu Feb  3 04:47:59 1994
--- web2c/Makefile.in	Fri Dec 16 12:56:06 1994
***************
*** 13,18 ****
  
  # Generic installation directories.
! prefix = /usr/local
! exec_prefix = $(prefix)
  bindir = $(exec_prefix)/bin
  scriptdir = $(bindir)
--- 13,18 ----
  
  # Generic installation directories.
! prefix = @prefix@
! exec_prefix = @exec_prefix@
  bindir = $(exec_prefix)/bin
  scriptdir = $(bindir)
***************
*** 75,81 ****
  # description of each of these formats.
  bases = mf.base cmmf.base
! fmts = tex.fmt latex.fmt 
! # slitex.fmt etex.fmt amslatex.fmt amstex.fmt texinfo.fmt inrstex.fmt
! # picplus.fmt
  
  # The name of the file that defines your local devices, for use with
--- 75,81 ----
  # description of each of these formats.
  bases = mf.base cmmf.base
! fmts = tex.fmt
! # latex.fmt slitex.fmt etex.fmt amslatex.fmt amstex.fmt texinfo.fmt
! # inrstex.fmt picplus.fmt
  
  # The name of the file that defines your local devices, for use with
***************
*** 124,131 ****
  # Make `#include <X11/...>' and `-lX...' work.
  # wlibs is substituted by web2c's configure, LIBS by general configure
! # routines, and the others by AC_FIND_XTRA.
! x_include_flags = @x_include_flags@
! x_lib_flags = @x_lib_flags@
! x_extra_libs = @x_extra_libs@
  wlibs = @wlibs@
  LIBS = @LIBS@ $(extralibs)
--- 124,131 ----
  # Make `#include <X11/...>' and `-lX...' work.
  # wlibs is substituted by web2c's configure, LIBS by general configure
! # routines, and the others by AC_PATH_XTRA.
! x_include_flags = @X_CFLAGS@
! x_lib_flags = @X_LIBS@
! x_extra_libs = @X_EXTRA_LIBS@
  wlibs = @wlibs@
  LIBS = @LIBS@ $(extralibs)
***************
*** 467,471 ****
  
  realclean distclean::
! 	rm -f Makefile config.status
  
  extraclean::
--- 467,471 ----
  
  realclean distclean::
! 	rm -f Makefile config.status config.log config.cache
  
  extraclean::
*** web2c/configure.in.save	Tue Feb  1 14:42:20 1994
--- web2c/configure.in	Fri Dec 16 13:11:03 1994
***************
*** 12,60 ****
  sinclude(../kpathsea/common.ac)
  
- dnl Do something erroneous if the symbol we are testing is undefined.
- define(user_sym_check, [AC_TEST_CPP(#include "$srcdir/lib/c-auto.h.in"
- #ifndef $1
- #include <nonexistxyz.kkk>
- #endif
- , $1=t
- )])
- 
  AC_PROG_YACC
  AC_PROG_LEX
! AC_LN_S
  
! AC_RETSIGTYPE
  
  dnl These tests prevent reliable cross-compilation.  Sigh.
! AC_CHAR_UNSIGNED
  AC_LONG_64_BITS
! AC_WORDS_BIGENDIAN
  
  dnl Must do this last, as the addition to DEFS in Autoconf 1.3 confuses
  dnl the compiler.
! AC_DECLARE_YYTEXT
  
! echo checking for window system libraries
! user_sym_check(SUNWIN)
! user_sym_check(XVIEWWIN)
! user_sym_check(X11WIN)
! user_sym_check(X10WIN)
! if test -n "$XVIEWWIN"; then
    wlibs="-lxview -lolgx -lX11 $wlibs"
    (cd $srcdir/mf/MFwindow; rm -f sun.c; $LN_S sun-xview.c sun.c)
  fi
! if test -n "$X11WIN"; then
!   AC_FIND_X
!   AC_FIND_XTRA
!   if test -z "$Xextlib"; then
!     AC_HAVE_LIBRARY(Xext, Xextlib=-lXext)
!   fi
!   wlibs="-lXt $Xextlib -lX11 $wlibs"
    (cd $srcdir/mf/MFwindow; rm -f x11.c; $LN_S x11-Xt.c x11.c)
  fi
! if test -n "$X10WIN"; then
    wlibs="-lX $wlibs"
  fi
! if test -n "$SUNWIN"; then
    wlibs="-lsuntool -lsunwindow -lpixrect $wlibs"
    (cd $srcdir/mf/MFwindow; rm -f sun.c; $LN_S sun-sunview.c sun.c)
--- 12,68 ----
  sinclude(../kpathsea/common.ac)
  
  AC_PROG_YACC
  AC_PROG_LEX
! AC_PROG_LN_S
  
! AC_TYPE_SIGNAL
  
  dnl These tests prevent reliable cross-compilation.  Sigh.
! AC_C_CHAR_UNSIGNED
  AC_LONG_64_BITS
! AC_C_BIGENDIAN
  
  dnl Must do this last, as the addition to DEFS in Autoconf 1.3 confuses
  dnl the compiler.
! AC_DECL_YYTEXT
! 
! dnl Check if lib/c-auto.h.in defines a preprocessor symbol.
! define(AC_KBSYM_CHECK, AC_EGREP_CPP(yes,
! [#include "$srcdir/lib/c-auto.h.in"
! #ifdef $1
!   yes
! #endif
! ], $1=yes, $1=no))
! 
! AC_MSG_CHECKING(for sunwindow libraries)
! AC_KBSYM_CHECK(SUNWIN)
! AC_MSG_RESULT($SUNWIN)
! 
! AC_MSG_CHECKING(for xview libraries)
! AC_KBSYM_CHECK(XVIEWWIN)
! AC_MSG_RESULT($XVIEWWIN)
! 
! AC_MSG_CHECKING(for X11 libraries)
! AC_KBSYM_CHECK(X11WIN)
! AC_MSG_RESULT($X11WIN)
! 
! AC_MSG_CHECKING(for X10 libraries)
! AC_KBSYM_CHECK(X10WIN)
! AC_MSG_RESULT($X10WIN)
  
! if test $XVIEWWIN = yes; then
    wlibs="-lxview -lolgx -lX11 $wlibs"
    (cd $srcdir/mf/MFwindow; rm -f sun.c; $LN_S sun-xview.c sun.c)
  fi
! if test $X11WIN = yes; then
!   AC_PATH_X
!   AC_PATH_XTRA
!   wlibs="-lXt $X_PRE_LIBS -lX11 $wlibs"
    (cd $srcdir/mf/MFwindow; rm -f x11.c; $LN_S x11-Xt.c x11.c)
  fi
! if test $X10WIN = yes; then
    wlibs="-lX $wlibs"
  fi
! if test $SUNWIN = yes; then
    wlibs="-lsuntool -lsunwindow -lpixrect $wlibs"
    (cd $srcdir/mf/MFwindow; rm -f sun.c; $LN_S sun-sunview.c sun.c)
***************
*** 62,87 ****
  AC_SUBST(wlibs)
  
! echo checking for small TeX/MF/BibTeX
! # Do TeX first.
! # If `small' version is not wanted, do nothing -- make will copy the
! # default change file.
! user_sym_check(SMALLTeX)
! if test -n "$SMALLTeX"; then
!   echo "(small TeX, creating tex/ctex.ch)"
    (cd $srcdir/tex && rm -f ctex.ch && sed -f small.sed <tex.ch >ctex.ch)
    AC_DEFINE(GLUERATIO_TYPE, float)
  fi
  
! # Metafont next.
! user_sym_check(SMALLMF)
! if test -n "$SMALLMF"; then
!   echo "(small Metafont, creating mf/cmf.ch)"
    (cd $srcdir/mf && rm -f cmf.ch && sed -f small.sed <mf.ch >cmf.ch)
  fi
  
! # And finally BibTeX.
! user_sym_check(SMALLBibTeX)
! if test -n "$SMALLBibTeX"; then
!   echo "(small BibTeX, creating bibtex/cbibtex.ch)"
    (cd $srcdir/bibtex \
     && rm -f cbibtex.ch && sed -f small.sed <bibtex.ch >cbibtex.ch)
--- 70,97 ----
  AC_SUBST(wlibs)
  
! dnl Do TeX first.
! dnl If `small' version is not wanted, do nothing -- make will copy the
! dnl default change file.
! AC_MSG_CHECKING(for small TeX)
! AC_KBSYM_CHECK(SMALLTeX)
! AC_MSG_RESULT($SMALLTeX)
! if test $SMALLTeX = yes; then
    (cd $srcdir/tex && rm -f ctex.ch && sed -f small.sed <tex.ch >ctex.ch)
    AC_DEFINE(GLUERATIO_TYPE, float)
  fi
  
! dnl Metafont next.
! AC_MSG_CHECKING(for small MF)
! AC_KBSYM_CHECK(SMALLMF)
! AC_MSG_RESULT($SMALLMF)
! if test $SMALLMF = yes; then
    (cd $srcdir/mf && rm -f cmf.ch && sed -f small.sed <mf.ch >cmf.ch)
  fi
  
! dnl And finally BibTeX.
! AC_MSG_CHECKING(for small BibTeX)
! AC_KBSYM_CHECK(SMALLBibTeX)
! AC_MSG_RESULT($SMALLBibTeX)
! if test $SMALLBibTeX = yes; then
    (cd $srcdir/bibtex \
     && rm -f cbibtex.ch && sed -f small.sed <bibtex.ch >cbibtex.ch)
*** web2c/configure.save	Tue Feb  1 14:42:36 1994
--- web2c/configure	Thu Jan  5 15:12:44 1995
***************
*** 1,131 ****
  #!/bin/sh
  # Guess values for system-dependent variables and create Makefiles.
! # Generated automatically using autoconf.
! # Copyright (C) 1991, 1992, 1993 Free Software Foundation, Inc.
  
! # This program is free software; you can redistribute it and/or modify
! # it under the terms of the GNU General Public License as published by
! # the Free Software Foundation; either version 2, or (at your option)
! # any later version.
! 
! # This program is distributed in the hope that it will be useful,
! # but WITHOUT ANY WARRANTY; without even the implied warranty of
! # MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
! # GNU General Public License for more details.
! 
! # You should have received a copy of the GNU General Public License
! # along with this program; if not, write to the Free Software
! # Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
! 
! # Usage: configure [--srcdir=DIR] [--host=HOST] [--gas] [--nfp]
! #        [--prefix=PREFIX] [--exec-prefix=PREFIX] [--with-PACKAGE[=VALUE]]
! # Ignores all args except --srcdir, --prefix, --exec-prefix, and
! # --with-PACKAGE[=VALUE] unless this script has special code to handle it.
  
! for arg
  do
-   # Handle --exec-prefix with a space before the argument.
-   if test x$next_exec_prefix = xyes; then exec_prefix=$arg; next_exec_prefix=
-   # Handle --host with a space before the argument.
-   elif test x$next_host = xyes; then next_host=
-   # Handle --prefix with a space before the argument.
-   elif test x$next_prefix = xyes; then prefix=$arg; next_prefix=
-   # Handle --srcdir with a space before the argument.
-   elif test x$next_srcdir = xyes; then srcdir=$arg; next_srcdir=
-   else
-     case $arg in
-      # For backward compatibility, recognize -exec-prefix and --exec_prefix.
-      -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* | --exec=* | --exe=* | --ex=* | --e=*)
- 	exec_prefix=`echo $arg | sed 's/[-a-z_]*=//'` ;;
-      -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- | --exec | --exe | --ex | --e)
- 	next_exec_prefix=yes ;;
- 
-      -gas | --gas | --ga | --g) ;;
- 
-      -host=* | --host=* | --hos=* | --ho=* | --h=*) ;;
-      -host | --host | --hos | --ho | --h)
- 	next_host=yes ;;
- 
-      -nfp | --nfp | --nf) ;;
- 
-      -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
- 	prefix=`echo $arg | sed 's/[-a-z_]*=//'` ;;
-      -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
- 	next_prefix=yes ;;
- 
-      -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=* | --s=*)
- 	srcdir=`echo $arg | sed 's/[-a-z_]*=//'` ;;
-      -srcdir | --srcdir | --srcdi | --srcd | --src | --sr | --s)
- 	next_srcdir=yes ;;
- 
-      -with-* | --with-*)
-        package=`echo $arg|sed -e 's/-*with-//' -e 's/=.*//'`
-        # Reject names that aren't valid shell variable names.
-        if test -n "`echo $package| sed 's/[-a-zA-Z0-9_]//g'`"; then
-          echo "configure: $package: invalid package name" >&2; exit 1
-        fi
-        package=`echo $package| sed 's/-/_/g'`
-        case "$arg" in
-          *=*) val="`echo $arg|sed 's/[^=]*=//'`" ;;
-          *) val=1 ;;
-        esac
-        eval "with_$package='$val'" ;;
  
!      -v | -verbose | --verbose | --verbos | --verbo | --verb | --ver | --ve | --v)
!        verbose=yes ;;
  
!      *) ;;
      esac
!   fi
  done
  
! trap 'rm -fr conftest* confdefs* core; exit 1' 1 3 15
! trap 'rm -f confdefs*' 0
  
  # NLS nuisances.
  # These must not be set unconditionally because not all systems understand
  # e.g. LANG=C (notably SCO).
! if test "${LC_ALL+set}" = 'set' ; then LC_ALL=C; export LC_ALL; fi
! if test "${LANG+set}"   = 'set' ; then LANG=C;   export LANG;   fi
  
! rm -f conftest* confdefs.h
  # AIX cpp loses on an empty file, so make sure it contains at least a newline.
  echo > confdefs.h
- compile='${CC-cc} $CFLAGS conftest.c -o conftest $LIBS >/dev/null 2>&1'
  
  # A filename unique to this package, relative to the directory that
  # configure is in, which we can look for to find out if srcdir is correct.
! unique_file=web2c/web2c.c
  
  # Find the source files, if location was not specified.
  if test -z "$srcdir"; then
!   srcdirdefaulted=yes
!   # Try the directory containing this script, then `..'.
!   prog=$0
!   confdir=`echo $prog|sed 's%/[^/][^/]*$%%'`
!   test "X$confdir" = "X$prog" && confdir=.
!   srcdir=$confdir
!   if test ! -r $srcdir/$unique_file; then
      srcdir=..
    fi
  fi
! if test ! -r $srcdir/$unique_file; then
!   if test x$srcdirdefaulted = xyes; then
!     echo "configure: Can not find sources in \`${confdir}' or \`..'." 1>&2
    else
!     echo "configure: Can not find sources in \`${srcdir}'." 1>&2
    fi
!   exit 1
  fi
- # Preserve a srcdir of `.' to avoid automounter screwups with pwd.
- # But we can't avoid them for `..', to make subdirectories work.
- case $srcdir in
-   .|/*|~*) ;;
-   *) srcdir=`cd $srcdir; pwd` ;; # Make relative path absolute.
- esac
  
  
- # Save the original args to write them into config.status later.
- configure_args="$*"
  
  
--- 1,403 ----
  #!/bin/sh
+ 
  # Guess values for system-dependent variables and create Makefiles.
! # Generated automatically using autoconf version 2.1 
! # Copyright (C) 1992, 1993, 1994 Free Software Foundation, Inc.
! #
! # This configure script is free software; the Free Software Foundation
! # gives unlimited permission to copy, distribute and modify it.
! 
! # Defaults:
! ac_help=
! ac_default_prefix=/usr/local
! # Any additions from configure.in:
! ac_help="$ac_help
!   --with-x                use the X Window System"
! 
! # Initialize some variables set by options.
! # The variables have the same names as the options, with
! # dashes changed to underlines.
! build=NONE
! cache_file=./config.cache
! exec_prefix=NONE
! host=NONE
! no_create=
! nonopt=NONE
! no_recursion=
! prefix=NONE
! program_prefix=NONE
! program_suffix=NONE
! program_transform_name=s,x,x,
! silent=
! site=
! srcdir=
! target=NONE
! verbose=
! x_includes=NONE
! x_libraries=NONE
  
! # Initialize some other variables.
! subdirs=
  
! ac_prev=
! for ac_option
  do
  
!   # If the previous option needs an argument, assign it.
!   if test -n "$ac_prev"; then
!     eval "$ac_prev=\$ac_option"
!     ac_prev=
!     continue
!   fi
! 
!   case "$ac_option" in
!   -*=*) ac_optarg=`echo "$ac_option" | sed 's/[-_a-zA-Z0-9]*=//'` ;;
!   *) ac_optarg= ;;
!   esac
! 
!   # Accept the important Cygnus configure options, so we can diagnose typos.
! 
!   case "$ac_option" in
! 
!   -build | --build | --buil | --bui | --bu | --b)
!     ac_prev=build ;;
!   -build=* | --build=* | --buil=* | --bui=* | --bu=* | --b=*)
!     build="$ac_optarg" ;;
! 
!   -cache-file | --cache-file | --cache-fil | --cache-fi \
!   | --cache-f | --cache- | --cache | --cach | --cac | --ca | --c)
!     ac_prev=cache_file ;;
!   -cache-file=* | --cache-file=* | --cache-fil=* | --cache-fi=* \
!   | --cache-f=* | --cache-=* | --cache=* | --cach=* | --cac=* | --ca=* | --c=*)
!     cache_file="$ac_optarg" ;;
! 
!   -disable-* | --disable-*)
!     ac_feature=`echo $ac_option|sed -e 's/-*disable-//'`
!     # Reject names that are not valid shell variable names.
!     if test -n "`echo $ac_feature| sed 's/[-a-zA-Z0-9_]//g'`"; then
!       { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
!     fi
!     ac_feature=`echo $ac_feature| sed 's/-/_/g'`
!     eval "enable_${ac_feature}=no" ;;
! 
!   -enable-* | --enable-*)
!     ac_feature=`echo $ac_option|sed -e 's/-*enable-//' -e 's/=.*//'`
!     # Reject names that are not valid shell variable names.
!     if test -n "`echo $ac_feature| sed 's/[-_a-zA-Z0-9]//g'`"; then
!       { echo "configure: error: $ac_feature: invalid feature name" 1>&2; exit 1; }
!     fi
!     ac_feature=`echo $ac_feature| sed 's/-/_/g'`
!     case "$ac_option" in
!       *=*) ;;
!       *) ac_optarg=yes ;;
!     esac
!     eval "enable_${ac_feature}='$ac_optarg'" ;;
  
!   -exec-prefix | --exec_prefix | --exec-prefix | --exec-prefi \
!   | --exec-pref | --exec-pre | --exec-pr | --exec-p | --exec- \
!   | --exec | --exe | --ex)
!     ac_prev=exec_prefix ;;
!   -exec-prefix=* | --exec_prefix=* | --exec-prefix=* | --exec-prefi=* \
!   | --exec-pref=* | --exec-pre=* | --exec-pr=* | --exec-p=* | --exec-=* \
!   | --exec=* | --exe=* | --ex=*)
!     exec_prefix="$ac_optarg" ;;
! 
!   -gas | --gas | --ga | --g)
!     # Obsolete; use --with-gas.
!     with_gas=yes ;;
! 
!   -help | --help | --hel | --he)
!     # Omit some internal or obsolete options to make the list less imposing.
!     # This message is too long to be a string in the A/UX 3.1 sh.
!     cat << EOF
! Usage: configure [options] [host]
! Options: [defaults in brackets after descriptions]
! Configuration:
!   --cache-file=FILE       cache test results in FILE
!   --help                  print this message
!   --no-create             do not create output files
!   --quiet, --silent       do not print \`checking...' messages
!   --version               print the version of autoconf that created configure
! Directory and file names:
!   --prefix=PREFIX         install architecture-independent files in PREFIX
!                           [$ac_default_prefix]
!   --exec-prefix=PREFIX    install architecture-dependent files in PREFIX
!                           [same as prefix]
!   --srcdir=DIR            find the sources in DIR [configure dir or ..]
!   --program-prefix=PREFIX prepend PREFIX to installed program names
!   --program-suffix=SUFFIX append SUFFIX to installed program names
!   --program-transform-name=PROGRAM run sed PROGRAM on installed program names
! Host type:
!   --build=BUILD           configure for building on BUILD [BUILD=HOST]
!   --host=HOST             configure for HOST [guessed]
!   --target=TARGET         configure for TARGET [TARGET=HOST]
! Features and packages:
!   --disable-FEATURE       do not include FEATURE (same as --enable-FEATURE=no)
!   --enable-FEATURE[=ARG]  include FEATURE [ARG=yes]
!   --with-PACKAGE[=ARG]    use PACKAGE [ARG=yes]
!   --without-PACKAGE       do not use PACKAGE (same as --with-PACKAGE=no)
!   --x-includes=DIR        X include files are in DIR
!   --x-libraries=DIR       X library files are in DIR
! --enable and --with options recognized:$ac_help
! EOF
!     exit 0 ;;
! 
!   -host | --host | --hos | --ho)
!     ac_prev=host ;;
!   -host=* | --host=* | --hos=* | --ho=*)
!     host="$ac_optarg" ;;
! 
!   -nfp | --nfp | --nf)
!     # Obsolete; use --without-fp.
!     with_fp=no ;;
! 
!   -no-create | --no-create | --no-creat | --no-crea | --no-cre \
!   | --no-cr | --no-c)
!     no_create=yes ;;
! 
!   -no-recursion | --no-recursion | --no-recursio | --no-recursi \
!   | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r)
!     no_recursion=yes ;;
! 
!   -prefix | --prefix | --prefi | --pref | --pre | --pr | --p)
!     ac_prev=prefix ;;
!   -prefix=* | --prefix=* | --prefi=* | --pref=* | --pre=* | --pr=* | --p=*)
!     prefix="$ac_optarg" ;;
! 
!   -program-prefix | --program-prefix | --program-prefi | --program-pref \
!   | --program-pre | --program-pr | --program-p)
!     ac_prev=program_prefix ;;
!   -program-prefix=* | --program-prefix=* | --program-prefi=* \
!   | --program-pref=* | --program-pre=* | --program-pr=* | --program-p=*)
!     program_prefix="$ac_optarg" ;;
! 
!   -program-suffix | --program-suffix | --program-suffi | --program-suff \
!   | --program-suf | --program-su | --program-s)
!     ac_prev=program_suffix ;;
!   -program-suffix=* | --program-suffix=* | --program-suffi=* \
!   | --program-suff=* | --program-suf=* | --program-su=* | --program-s=*)
!     program_suffix="$ac_optarg" ;;
! 
!   -program-transform-name | --program-transform-name \
!   | --program-transform-nam | --program-transform-na \
!   | --program-transform-n | --program-transform- \
!   | --program-transform | --program-transfor \
!   | --program-transfo | --program-transf \
!   | --program-trans | --program-tran \
!   | --progr-tra | --program-tr | --program-t)
!     ac_prev=program_transform_name ;;
!   -program-transform-name=* | --program-transform-name=* \
!   | --program-transform-nam=* | --program-transform-na=* \
!   | --program-transform-n=* | --program-transform-=* \
!   | --program-transform=* | --program-transfor=* \
!   | --program-transfo=* | --program-transf=* \
!   | --program-trans=* | --program-tran=* \
!   | --progr-tra=* | --program-tr=* | --program-t=*)
!     program_transform_name="$ac_optarg" ;;
! 
!   -q | -quiet | --quiet | --quie | --qui | --qu | --q \
!   | -silent | --silent | --silen | --sile | --sil)
!     silent=yes ;;
! 
!   -site | --site | --sit)
!     ac_prev=site ;;
!   -site=* | --site=* | --sit=*)
!     site="$ac_optarg" ;;
! 
!   -srcdir | --srcdir | --srcdi | --srcd | --src | --sr)
!     ac_prev=srcdir ;;
!   -srcdir=* | --srcdir=* | --srcdi=* | --srcd=* | --src=* | --sr=*)
!     srcdir="$ac_optarg" ;;
! 
!   -target | --target | --targe | --targ | --tar | --ta | --t)
!     ac_prev=target ;;
!   -target=* | --target=* | --targe=* | --targ=* | --tar=* | --ta=* | --t=*)
!     target="$ac_optarg" ;;
! 
!   -v | -verbose | --verbose | --verbos | --verbo | --verb)
!     verbose=yes ;;
! 
!   -version | --version | --versio | --versi | --vers)
!     echo "configure generated by autoconf version 2.1"
!     exit 0 ;;
! 
!   -with-* | --with-*)
!     ac_package=`echo $ac_option|sed -e 's/-*with-//' -e 's/=.*//'`
!     # Reject names that are not valid shell variable names.
!     if test -n "`echo $ac_package| sed 's/[-_a-zA-Z0-9]//g'`"; then
!       { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
!     fi
!     ac_package=`echo $ac_package| sed 's/-/_/g'`
!     case "$ac_option" in
!       *=*) ;;
!       *) ac_optarg=yes ;;
      esac
!     eval "with_${ac_package}='$ac_optarg'" ;;
! 
!   -without-* | --without-*)
!     ac_package=`echo $ac_option|sed -e 's/-*without-//'`
!     # Reject names that are not valid shell variable names.
!     if test -n "`echo $ac_package| sed 's/[-a-zA-Z0-9_]//g'`"; then
!       { echo "configure: error: $ac_package: invalid package name" 1>&2; exit 1; }
!     fi
!     ac_package=`echo $ac_package| sed 's/-/_/g'`
!     eval "with_${ac_package}=no" ;;
! 
!   --x)
!     # Obsolete; use --with-x.
!     with_x=yes ;;
! 
!   -x-includes | --x-includes | --x-include | --x-includ | --x-inclu \
!   | --x-incl | --x-inc | --x-in | --x-i)
!     ac_prev=x_includes ;;
!   -x-includes=* | --x-includes=* | --x-include=* | --x-includ=* | --x-inclu=* \
!   | --x-incl=* | --x-inc=* | --x-in=* | --x-i=*)
!     x_includes="$ac_optarg" ;;
! 
!   -x-libraries | --x-libraries | --x-librarie | --x-librari \
!   | --x-librar | --x-libra | --x-libr | --x-lib | --x-li | --x-l)
!     ac_prev=x_libraries ;;
!   -x-libraries=* | --x-libraries=* | --x-librarie=* | --x-librari=* \
!   | --x-librar=* | --x-libra=* | --x-libr=* | --x-lib=* | --x-li=* | --x-l=*)
!     x_libraries="$ac_optarg" ;;
! 
!   -*) { echo "configure: error: $ac_option: invalid option; use --help to show usage" 1>&2; exit 1; }
!     ;;
! 
!   *) 
!     if test -n "`echo $ac_option| sed 's/[-a-z0-9.]//g'`"; then
!       echo "configure: warning: $ac_option: invalid host type" 1>&2
!     fi
!     if test "x$nonopt" != xNONE; then
!       { echo "configure: error: can only configure for one host and one target at a time" 1>&2; exit 1; }
!     fi
!     nonopt="$ac_option"
!     ;;
! 
!   esac
  done
  
! if test -n "$ac_prev"; then
!   { echo "configure: error: missing argument to --`echo $ac_prev | sed 's/_/-/g'`" 1>&2; exit 1; }
! fi
! 
! trap 'rm -fr conftest* confdefs* core $ac_clean_files; exit 1' 1 2 15
! 
! # File descriptor usage:
! # 0 unused; standard input
! # 1 file creation
! # 2 errors and warnings
! # 3 unused; some systems may open it to /dev/tty
! # 4 checking for... messages and results
! # 5 compiler messages saved in config.log
! if test "$silent" = yes; then
!   exec 4>/dev/null
! else
!   exec 4>&1
! fi
! exec 5>./config.log
! 
! echo "\
! This file contains any messages produced by compilers while
! running configure, to aid debugging if configure makes a mistake.
! " 1>&5
! 
! # Strip out --no-create and --no-recursion so they do not pile up.
! # Also quote any args containing shell metacharacters.
! ac_configure_args=
! for ac_arg
! do
!   case "$ac_arg" in
!   -no-create | --no-create | --no-creat | --no-crea | --no-cre \
!   | --no-cr | --no-c) ;;
!   -no-recursion | --no-recursion | --no-recursio | --no-recursi \
!   | --no-recurs | --no-recur | --no-recu | --no-rec | --no-re | --no-r) ;;
!   *" "*|*"	"*|*[\[\]\~\#\$\^\&\*\(\)\{\}\\\|\;\<\>\?]*)
!   ac_configure_args="$ac_configure_args '$ac_arg'" ;;
!   *) ac_configure_args="$ac_configure_args $ac_arg" ;;
!   esac
! done
  
  # NLS nuisances.
+ # Only set LANG and LC_ALL to C if already set.
  # These must not be set unconditionally because not all systems understand
  # e.g. LANG=C (notably SCO).
! if test "${LC_ALL+set}" = set; then LC_ALL=C; export LC_ALL; fi
! if test "${LANG+set}"   = set; then LANG=C;   export LANG;   fi
  
! # confdefs.h avoids OS command line length limits that DEFS can exceed.
! rm -rf conftest* confdefs.h
  # AIX cpp loses on an empty file, so make sure it contains at least a newline.
  echo > confdefs.h
  
  # A filename unique to this package, relative to the directory that
  # configure is in, which we can look for to find out if srcdir is correct.
! ac_unique_file=web2c/web2c.c
  
  # Find the source files, if location was not specified.
  if test -z "$srcdir"; then
!   ac_srcdir_defaulted=yes
!   # Try the directory containing this script, then its parent.
!   ac_prog=$0
!   ac_confdir=`echo $ac_prog|sed 's%/[^/][^/]*$%%'`
!   test "x$ac_confdir" = "x$ac_prog" && ac_confdir=.
!   srcdir=$ac_confdir
!   if test ! -r $srcdir/$ac_unique_file; then
      srcdir=..
    fi
+ else
+   ac_srcdir_defaulted=no
+ fi
+ if test ! -r $srcdir/$ac_unique_file; then
+   if test "$ac_srcdir_defaulted" = yes; then
+     { echo "configure: error: can not find sources in $ac_confdir or .." 1>&2; exit 1; }
+   else
+     { echo "configure: error: can not find sources in $srcdir" 1>&2; exit 1; }
+   fi
+ fi
+ srcdir=`echo "${srcdir}" | sed 's%\([^/]\)/*$%\1%'`
+ 
+ # Prefer explicitly selected file to automatically selected ones.
+ if test -z "$CONFIG_SITE"; then
+   if test "x$prefix" != xNONE; then
+     CONFIG_SITE="$prefix/share/config.site $prefix/etc/config.site"
+   else
+     CONFIG_SITE="$ac_default_prefix/share/config.site $ac_default_prefix/etc/config.site"
+   fi
+ fi
+ for ac_site_file in $CONFIG_SITE; do
+   if test -r "$ac_site_file"; then
+     echo "loading site script $ac_site_file"
+     . "$ac_site_file"
+   fi
+ done
+ 
+ if test -r "$cache_file"; then
+   echo "loading cache $cache_file"
+   . $cache_file
+ else
+   echo "creating cache $cache_file"
+   > $cache_file
  fi
! 
! ac_ext=c
! # CFLAGS is not in ac_cpp because -g, -O, etc. are not valid cpp options.
! ac_cpp='$CPP $CPPFLAGS'
! ac_compile='${CC-cc} $CFLAGS $CPPFLAGS conftest.$ac_ext -c 1>&5 2>&5'
! ac_link='${CC-cc} $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext -o conftest $LIBS 1>&5 2>&5'
! 
! if (echo "testing\c"; echo 1,2,3) | grep c >/dev/null; then
!   # Stardent Vistra SVR4 grep lacks -e, says ghazi@caip.rutgers.edu.
!   if (echo -n testing; echo 1,2,3) | sed s/-n/xn/ | grep xn >/dev/null; then
!     ac_n= ac_c='
! ' ac_t='	'
    else
!     ac_n=-n ac_c= ac_t=
    fi
! else
!   ac_n= ac_c='\c' ac_t=
  fi
  
  
  
  
***************
*** 135,462 ****
  
  
  
! if test -z "$CC"; then
!   # Extract the first word of `gcc', so it can be a program name with args.
!   set dummy gcc; word=$2
!   echo checking for $word
!   IFS="${IFS= 	}"; saveifs="$IFS"; IFS="${IFS}:"
!   for dir in $PATH; do
!     test -z "$dir" && dir=.
!     if test -f $dir/$word; then
!       CC="gcc"
        break
      fi
    done
!   IFS="$saveifs"
  fi
- test -z "$CC" && CC="cc"
- test -n "$CC" && test -n "$verbose" && echo "	setting CC to $CC"
  
! # Find out if we are using GNU C, under whatever name.
! cat > conftest.c <<EOF
  #ifdef __GNUC__
!   yes
  #endif
  EOF
! ${CC-cc} -E conftest.c > conftest.out 2>&1
! if egrep yes conftest.out >/dev/null 2>&1; then
!   GCC=1 # For later tests.
  fi
! rm -f conftest*
! 
! echo checking how to run the C preprocessor
! if test -z "$CPP"; then
!   # This must be in double quotes, not single quotes, because CPP may get
!   # substituted into the Makefile and ``${CC-cc}'' will simply confuse
!   # make.  It must be expanded now.
!   CPP="${CC-cc} -E"
!   cat > conftest.c <<EOF
! #include "confdefs.h"
! #include <stdio.h>
! Syntax Error
! EOF
! err=`eval "($CPP conftest.c >/dev/null) 2>&1"`
! if test -z "$err"; then
!   :
  else
!   rm -rf conftest*
!   CPP=/lib/cpp
  fi
  rm -f conftest*
  fi
- test ".${verbose}" != "." && echo "	setting CPP to $CPP"
  
! # Make sure to not get the incompatible SysV /etc/install and
! # /usr/sbin/install, which might be in PATH before a BSD-like install,
! # or the SunOS /usr/etc/install directory, or the AIX /bin/install,
! # or the AFS install, which mishandles nonexistent args, or
! # /usr/ucb/install on SVR4, which tries to use the nonexistent group
! # `staff'.  On most BSDish systems install is in /usr/bin, not /usr/ucb
! # anyway.  Sigh.
! if test "z${INSTALL}" = "z" ; then
!   echo checking for install
!   IFS="${IFS= 	}"; saveifs="$IFS"; IFS="${IFS}:"
!   for dir in $PATH; do
!     test -z "$dir" && dir=.
!     case $dir in
!     /etc|/usr/sbin|/usr/etc|/usr/afsws/bin|/usr/ucb) ;;
      *)
!       if test -f $dir/installbsd; then
! 	INSTALL="$dir/installbsd -c" # OSF1
! 	INSTALL_PROGRAM='$(INSTALL)'
! 	INSTALL_DATA='$(INSTALL) -m 644'
! 	break
!       fi
!       if test -f $dir/install; then
! 	if grep dspmsg $dir/install >/dev/null 2>&1; then
! 	  : # AIX
! 	else
! 	  INSTALL="$dir/install -c"
! 	  INSTALL_PROGRAM='$(INSTALL)'
! 	  INSTALL_DATA='$(INSTALL) -m 644'
! 	  break
  	fi
!       fi
        ;;
      esac
    done
!   IFS="$saveifs"
  fi
! INSTALL=${INSTALL-cp}
! test -n "$verbose" && echo "	setting INSTALL to $INSTALL"
! INSTALL_PROGRAM=${INSTALL_PROGRAM-'$(INSTALL)'}
! test -n "$verbose" && echo "	setting INSTALL_PROGRAM to $INSTALL_PROGRAM"
! INSTALL_DATA=${INSTALL_DATA-'$(INSTALL)'}
! test -n "$verbose" && echo "	setting INSTALL_DATA to $INSTALL_DATA"
! 
! if test -z "$RANLIB"; then
!   # Extract the first word of `ranlib', so it can be a program name with args.
!   set dummy ranlib; word=$2
!   echo checking for $word
!   IFS="${IFS= 	}"; saveifs="$IFS"; IFS="${IFS}:"
!   for dir in $PATH; do
!     test -z "$dir" && dir=.
!     if test -f $dir/$word; then
!       RANLIB="ranlib"
        break
      fi
    done
!   IFS="$saveifs"
  fi
- test -z "$RANLIB" && RANLIB=":"
- test -n "$RANLIB" && test -n "$verbose" && echo "	setting RANLIB to $RANLIB"
- 
  
  
! echo checking for POSIXized ISC
  if test -d /etc/conf/kconfig.d &&
    grep _POSIX_VERSION /usr/include/sys/unistd.h >/dev/null 2>&1
  then
!   ISC=1 # If later tests want to check for ISC.
!   
! {
! test -n "$verbose" && \
! echo "	defining _POSIX_SOURCE"
! echo "#define" _POSIX_SOURCE 1 >> confdefs.h
! DEFS="$DEFS -D_POSIX_SOURCE=1"
! SEDDEFS="${SEDDEFS}\${SEDdA}_POSIX_SOURCE\${SEDdB}_POSIX_SOURCE\${SEDdC}1\${SEDdD}
! \${SEDuA}_POSIX_SOURCE\${SEDuB}_POSIX_SOURCE\${SEDuC}1\${SEDuD}
! \${SEDeA}_POSIX_SOURCE\${SEDeB}_POSIX_SOURCE\${SEDeC}1\${SEDeD}
! "
! }
  
!   if test -n "$GCC"; then
      CC="$CC -posix"
    else
      CC="$CC -Xp"
    fi
  fi
  
  
! echo checking for directory library header
! dirheader=
! if test -z "$dirheader"; then
!   echo checking for dirent.h
! cat > conftest.c <<EOF
  #include "confdefs.h"
  #include <sys/types.h>
! #include <dirent.h>
! int main() { exit(0); }
! int t() { DIR *dirp = 0; }
  EOF
! if eval $compile; then
    rm -rf conftest*
!   
! {
! test -n "$verbose" && \
! echo "	defining DIRENT"
! echo "#define" DIRENT 1 >> confdefs.h
! DEFS="$DEFS -DDIRENT=1"
! SEDDEFS="${SEDDEFS}\${SEDdA}DIRENT\${SEDdB}DIRENT\${SEDdC}1\${SEDdD}
! \${SEDuA}DIRENT\${SEDuB}DIRENT\${SEDuC}1\${SEDuD}
! \${SEDeA}DIRENT\${SEDeB}DIRENT\${SEDeC}1\${SEDeD}
! "
! }
!  dirheader=dirent.h
! 
  fi
  rm -f conftest*
  fi
! if test -z "$dirheader"; then
!   echo checking for sys/ndir.h
! cat > conftest.c <<EOF
  #include "confdefs.h"
! #include <sys/types.h>
! #include <sys/ndir.h>
! int main() { exit(0); }
! int t() { DIR *dirp = 0; }
  EOF
! if eval $compile; then
    rm -rf conftest*
!   
! {
! test -n "$verbose" && \
! echo "	defining SYSNDIR"
! echo "#define" SYSNDIR 1 >> confdefs.h
! DEFS="$DEFS -DSYSNDIR=1"
! SEDDEFS="${SEDDEFS}\${SEDdA}SYSNDIR\${SEDdB}SYSNDIR\${SEDdC}1\${SEDdD}
! \${SEDuA}SYSNDIR\${SEDuB}SYSNDIR\${SEDuC}1\${SEDuD}
! \${SEDeA}SYSNDIR\${SEDeB}SYSNDIR\${SEDeC}1\${SEDeD}
! "
! }
!  dirheader=sys/ndir.h
! 
  fi
  rm -f conftest*
  fi
! if test -z "$dirheader"; then
!   echo checking for sys/dir.h
! cat > conftest.c <<EOF
  #include "confdefs.h"
! #include <sys/types.h>
! #include <sys/dir.h>
! int main() { exit(0); }
! int t() { DIR *dirp = 0; }
  EOF
! if eval $compile; then
    rm -rf conftest*
!   
! {
! test -n "$verbose" && \
! echo "	defining SYSDIR"
! echo "#define" SYSDIR 1 >> confdefs.h
! DEFS="$DEFS -DSYSDIR=1"
! SEDDEFS="${SEDDEFS}\${SEDdA}SYSDIR\${SEDdB}SYSDIR\${SEDdC}1\${SEDdD}
! \${SEDuA}SYSDIR\${SEDuB}SYSDIR\${SEDuC}1\${SEDuD}
! \${SEDeA}SYSDIR\${SEDeB}SYSDIR\${SEDeC}1\${SEDeD}
! "
! }
!  dirheader=sys/dir.h
! 
  fi
  rm -f conftest*
  fi
! if test -z "$dirheader"; then
!   echo checking for ndir.h
! cat > conftest.c <<EOF
  #include "confdefs.h"
! #include <sys/types.h>
! #include <ndir.h>
! int main() { exit(0); }
! int t() { DIR *dirp = 0; }
  EOF
! if eval $compile; then
    rm -rf conftest*
!   
! {
! test -n "$verbose" && \
! echo "	defining NDIR"
! echo "#define" NDIR 1 >> confdefs.h
! DEFS="$DEFS -DNDIR=1"
! SEDDEFS="${SEDDEFS}\${SEDdA}NDIR\${SEDdB}NDIR\${SEDdC}1\${SEDdD}
! \${SEDuA}NDIR\${SEDuB}NDIR\${SEDuC}1\${SEDuD}
! \${SEDeA}NDIR\${SEDeB}NDIR\${SEDeC}1\${SEDeD}
! "
! }
!  dirheader=ndir.h
! 
  fi
  rm -f conftest*
  fi
  
! echo checking for closedir return value
! cat > conftest.c <<EOF
  #include "confdefs.h"
! #include <sys/types.h>
! #include <$dirheader>
! int closedir(); main() { exit(closedir(opendir(".")) != 0); }
  EOF
! eval $compile
  if test -s conftest && (./conftest; exit) 2>/dev/null; then
!   :
  else
!   
! {
! test -n "$verbose" && \
! echo "	defining VOID_CLOSEDIR"
! echo "#define" VOID_CLOSEDIR 1 >> confdefs.h
! DEFS="$DEFS -DVOID_CLOSEDIR=1"
! SEDDEFS="${SEDDEFS}\${SEDdA}VOID_CLOSEDIR\${SEDdB}VOID_CLOSEDIR\${SEDdC}1\${SEDdD}
! \${SEDuA}VOID_CLOSEDIR\${SEDuB}VOID_CLOSEDIR\${SEDuC}1\${SEDuD}
! \${SEDeA}VOID_CLOSEDIR\${SEDeB}VOID_CLOSEDIR\${SEDeC}1\${SEDeD}
! "
! }
! 
  fi
  rm -fr conftest*
  
! echo checking for Xenix
! cat > conftest.c <<EOF
  #include "confdefs.h"
! #if defined(M_XENIX) && !defined(M_UNIX)
!   yes
! #endif
! 
  EOF
! eval "$CPP conftest.c > conftest.out 2>&1"
! if egrep "yes" conftest.out >/dev/null 2>&1; then
    rm -rf conftest*
!   XENIX=1
  
  fi
  rm -f conftest*
  
- if test -n "$XENIX"; then
-   LIBS="$LIBS -lx"
-   case "$DEFS" in
-   *SYSNDIR*) ;;
-   *) LIBS="-ldir $LIBS" ;; # Make sure -ldir precedes any -lx.
-   esac
  fi
  
! echo checking for ANSI C header files
! cat > conftest.c <<EOF
  #include "confdefs.h"
  #include <stdlib.h>
- #include <stdarg.h>
- #include <string.h>
- #include <float.h>
  EOF
! err=`eval "($CPP conftest.c >/dev/null) 2>&1"`
! if test -z "$err"; then
!   rm -rf conftest*
!   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
! echo '#include "confdefs.h"
! #include <string.h>' > conftest.c
! eval "$CPP conftest.c > conftest.out 2>&1"
! if egrep "memchr" conftest.out >/dev/null 2>&1; then
    rm -rf conftest*
!   # SGI's /bin/cc from Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
! cat > conftest.c <<EOF
  #include "confdefs.h"
  #include <ctype.h>
  #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
  #define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
! #define XOR(e,f) (((e) && !(f)) || (!(e) && (f)))
  int main () { int i; for (i = 0; i < 256; i++)
  if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
--- 407,889 ----
  
  
+ echo $ac_n "checking whether ${MAKE-make} sets \$MAKE""... $ac_c" 1>&4
+ set dummy ${MAKE-make}; ac_make=$2
+ if eval "test \"`echo '${'ac_cv_prog_make_${ac_make}_set'+set}'`\" = set"; then
+   echo $ac_n "(cached) $ac_c" 1>&4
+ else
+   cat > conftestmake <<\EOF
+ all:
+ 	@echo 'ac_maketemp="${MAKE}"'
+ EOF
+ # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
+ eval `${MAKE-make} -f conftestmake 2>/dev/null | grep temp=`
+ if test -n "$ac_maketemp"; then
+   eval ac_cv_prog_make_${ac_make}_set=yes
+ else
+   eval ac_cv_prog_make_${ac_make}_set=no
+ fi
+ rm -f conftestmake
+ fi
+ if eval "test \"`echo '$ac_cv_prog_make_'${ac_make}_set`\" = yes"; then
+   echo "$ac_t""yes" 1>&4
+   SET_MAKE=
+ else
+   echo "$ac_t""no" 1>&4
+   SET_MAKE="MAKE=${MAKE-make}"
+ fi
  
! 
! # Extract the first word of "gcc", so it can be a program name with args.
! set dummy gcc; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_prog_CC'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   if test -n "$CC"; then
!   ac_cv_prog_CC="$CC" # Let the user override the test.
! else
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
!   for ac_dir in $PATH; do
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_prog_CC="gcc"
        break
      fi
    done
!   IFS="$ac_save_ifs"
!   test -z "$ac_cv_prog_CC" && ac_cv_prog_CC="cc"
! fi
! fi
! CC="$ac_cv_prog_CC"
! if test -n "$CC"; then
!   echo "$ac_t""$CC" 1>&4
! else
!   echo "$ac_t""no" 1>&4
  fi
  
! 
! echo $ac_n "checking whether we are using GNU C""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_prog_gcc'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   cat > conftest.c <<EOF
  #ifdef __GNUC__
!   yes;
  #endif
  EOF
! if ${CC-cc} -E conftest.c 2>&5 | egrep yes >/dev/null 2>&1; then
!   ac_cv_prog_gcc=yes
! else
!   ac_cv_prog_gcc=no
  fi
! fi
! echo "$ac_t""$ac_cv_prog_gcc" 1>&4
! if test $ac_cv_prog_gcc = yes; then
!   GCC=yes
!   if test "${CFLAGS+set}" != set; then
!     echo $ac_n "checking whether ${CC-cc} accepts -g""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_prog_gcc_g'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
  else
!   echo 'void f(){}' > conftest.c
! if test -z "`${CC-cc} -g -c conftest.c 2>&1`"; then
!   ac_cv_prog_gcc_g=yes
! else
!   ac_cv_prog_gcc_g=no
  fi
  rm -f conftest*
+ 
+ fi
+     echo "$ac_t""$ac_cv_prog_gcc_g" 1>&4
+     if test $ac_cv_prog_gcc_g = yes; then
+       CFLAGS="-g -O"
+     else
+       CFLAGS="-O"
+     fi
+   fi
+ else
+   GCC=
+   test "${CFLAGS+set}" = set || CFLAGS="-g"
  fi
  
! ac_aux_dir=
! for ac_dir in $srcdir $srcdir/.. $srcdir/../..; do
!   if test -f $ac_dir/install-sh; then
!     ac_aux_dir=$ac_dir
!     ac_install_sh="$ac_aux_dir/install-sh -c"
!     break
!   elif test -f $ac_dir/install.sh; then
!     ac_aux_dir=$ac_dir
!     ac_install_sh="$ac_aux_dir/install.sh -c"
!     break
!   fi
! done
! if test -z "$ac_aux_dir"; then
!   { echo "configure: error: can not find install-sh or install.sh in $srcdir $srcdir/.. $srcdir/../.." 1>&2; exit 1; }
! fi
! ac_config_guess=$ac_aux_dir/config.guess
! ac_config_sub=$ac_aux_dir/config.sub
! ac_configure=$ac_aux_dir/configure # This should be Cygnus configure.
! 
! # Find a good install program.  We prefer a C program (faster),
! # so one script is as good as another.  But avoid the broken or
! # incompatible versions:
! # SysV /etc/install, /usr/sbin/install
! # SunOS /usr/etc/install
! # IRIX /sbin/install
! # AIX /bin/install
! # AFS /usr/afsws/bin/install, which mishandles nonexistent args
! # SVR4 /usr/ucb/install, which tries to use the nonexistent group "staff"
! # ./install, which can be erroneously created by make from ./install.sh.
! echo $ac_n "checking for a BSD compatible install""... $ac_c" 1>&4
! if test -z "$INSTALL"; then
! if eval "test \"`echo '${'ac_cv_path_install'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!     IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
!   for ac_dir in $PATH; do
!     case "$ac_dir" in
!     ''|.|/etc|/usr/sbin|/usr/etc|/sbin|/usr/afsws/bin|/usr/ucb) ;;
      *)
!       # OSF1 and SCO ODT 3.0 have their own names for install.
!       for ac_prog in ginstall installbsd scoinst install; do
!         if test -f $ac_dir/$ac_prog; then
! 	  if test $ac_prog = install &&
!             grep dspmsg $ac_dir/$ac_prog >/dev/null 2>&1; then
! 	    # AIX install.  It has an incompatible calling convention.
! 	    # OSF/1 installbsd also uses dspmsg, but is usable.
! 	    :
! 	  else
! 	    ac_cv_path_install="$ac_dir/$ac_prog -c"
! 	    break 2
! 	  fi
  	fi
!       done
        ;;
      esac
    done
!   IFS="$ac_save_ifs"
!   # As a last resort, use the slow shell script.
!   test -z "$ac_cv_path_install" && ac_cv_path_install="$ac_install_sh"
  fi
!   INSTALL="$ac_cv_path_install"
! fi
! echo "$ac_t""$INSTALL" 1>&4
! 
! # Use test -z because SunOS4 sh mishandles braces in ${var-val}.
! # It thinks the first close brace ends the variable substitution.
! test -z "$INSTALL_PROGRAM" && INSTALL_PROGRAM='${INSTALL}'
! 
! test -z "$INSTALL_DATA" && INSTALL_DATA='${INSTALL} -m 644'
! 
! # Extract the first word of "ranlib", so it can be a program name with args.
! set dummy ranlib; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_prog_RANLIB'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   if test -n "$RANLIB"; then
!   ac_cv_prog_RANLIB="$RANLIB" # Let the user override the test.
! else
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
!   for ac_dir in $PATH; do
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_prog_RANLIB="ranlib"
        break
      fi
    done
!   IFS="$ac_save_ifs"
!   test -z "$ac_cv_prog_RANLIB" && ac_cv_prog_RANLIB=":"
! fi
! fi
! RANLIB="$ac_cv_prog_RANLIB"
! if test -n "$RANLIB"; then
!   echo "$ac_t""$RANLIB" 1>&4
! else
!   echo "$ac_t""no" 1>&4
  fi
  
  
! echo $ac_n "checking for POSIXized ISC""... $ac_c" 1>&4
  if test -d /etc/conf/kconfig.d &&
    grep _POSIX_VERSION /usr/include/sys/unistd.h >/dev/null 2>&1
  then
!   echo "$ac_t""yes" 1>&4
!   ISC=yes # If later tests want to check for ISC.
!   cat >> confdefs.h <<\EOF
! #define _POSIX_SOURCE 1
! EOF
  
!   if test "$GCC" = yes; then
      CC="$CC -posix"
    else
      CC="$CC -Xp"
    fi
+ else
+   echo "$ac_t""no" 1>&4
+   ISC=
  fi
  
  
! ac_header_dirent=no
! for ac_hdr in dirent.h sys/ndir.h sys/dir.h ndir.h
! do
! ac_safe=`echo "$ac_hdr" | tr './\055' '___'`
! echo $ac_n "checking for $ac_hdr that defines DIR""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_header_dirent_$ac_safe'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   cat > conftest.$ac_ext <<EOF
! #line 639 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
! #include <$ac_hdr>
! int main() { return 0; }
! int t() {
! DIR *dirp = 0;
! ; return 0; }
  EOF
! if eval $ac_compile; then
    rm -rf conftest*
!   eval "ac_cv_header_dirent_$ac_safe=yes"
! else
!   rm -rf conftest*
!   eval "ac_cv_header_dirent_$ac_safe=no"
  fi
  rm -f conftest*
+ 
+ fi
+ if eval "test \"`echo '$ac_cv_header_dirent_'$ac_safe`\" = yes"; then
+   echo "$ac_t""yes" 1>&4
+     ac_tr_hdr=HAVE_`echo $ac_hdr | tr '[a-z]./\055' '[A-Z]___'`
+   cat >> confdefs.h <<EOF
+ #define $ac_tr_hdr 1
+ EOF
+  ac_header_dirent=$ac_hdr; break
+ else
+   echo "$ac_t""no" 1>&4
  fi
! done
! # Two versions of opendir et al. are in -ldir and -lx on SCO Xenix.
! if test $ac_header_dirent = dirent.h; then
! echo $ac_n "checking for -ldir""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_lib_dir'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   ac_save_LIBS="$LIBS"
! LIBS="$LIBS -ldir "
! cat > conftest.$ac_ext <<EOF
! #line 678 "configure"
  #include "confdefs.h"
! 
! int main() { return 0; }
! int t() {
! opendir()
! ; return 0; }
  EOF
! if eval $ac_link; then
    rm -rf conftest*
!   eval "ac_cv_lib_dir=yes"
! else
!   rm -rf conftest*
!   eval "ac_cv_lib_dir=no"
  fi
  rm -f conftest*
+ LIBS="$ac_save_LIBS"
+ 
  fi
! if eval "test \"`echo '$ac_cv_lib_'dir`\" = yes"; then
!   echo "$ac_t""yes" 1>&4
!   LIBS="$LIBS -ldir"
! else
!   echo "$ac_t""no" 1>&4
! fi
! 
! else
! echo $ac_n "checking for -lx""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_lib_x'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   ac_save_LIBS="$LIBS"
! LIBS="$LIBS -lx "
! cat > conftest.$ac_ext <<EOF
! #line 712 "configure"
  #include "confdefs.h"
! 
! int main() { return 0; }
! int t() {
! opendir()
! ; return 0; }
  EOF
! if eval $ac_link; then
    rm -rf conftest*
!   eval "ac_cv_lib_x=yes"
! else
!   rm -rf conftest*
!   eval "ac_cv_lib_x=no"
  fi
  rm -f conftest*
+ LIBS="$ac_save_LIBS"
+ 
+ fi
+ if eval "test \"`echo '$ac_cv_lib_'x`\" = yes"; then
+   echo "$ac_t""yes" 1>&4
+   LIBS="$LIBS -lx"
+ else
+   echo "$ac_t""no" 1>&4
  fi
! 
! fi
! 
! echo $ac_n "checking how to run the C preprocessor""... $ac_c" 1>&4
! # On Suns, sometimes $CPP names a directory.
! if test -n "$CPP" && test -d "$CPP"; then
!   CPP=
! fi
! if test -z "$CPP"; then
! if eval "test \"`echo '${'ac_cv_prog_CPP'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!     # This must be in double quotes, not single quotes, because CPP may get
!   # substituted into the Makefile and "${CC-cc}" will confuse make.
!   CPP="${CC-cc} -E"
!   # On the NeXT, cc -E runs the code through the compiler's parser,
!   # not just through cpp.
!   cat > conftest.$ac_ext <<EOF
! #line 755 "configure"
  #include "confdefs.h"
! #include <assert.h>
! Syntax Error
  EOF
! eval "$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! ac_err=`grep -v '^ *+' conftest.out`
! if test -z "$ac_err"; then
!   :
! else
!   echo "$ac_err" >&5
    rm -rf conftest*
!   CPP="${CC-cc} -E -traditional-cpp"
!   cat > conftest.$ac_ext <<EOF
! #line 769 "configure"
! #include "confdefs.h"
! #include <assert.h>
! Syntax Error
! EOF
! eval "$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! ac_err=`grep -v '^ *+' conftest.out`
! if test -z "$ac_err"; then
!   :
! else
!   echo "$ac_err" >&5
!   rm -rf conftest*
!   CPP=/lib/cpp
! fi
! rm -f conftest*
  fi
  rm -f conftest*
+   ac_cv_prog_CPP="$CPP"
  fi
+ fi
+ CPP="$ac_cv_prog_CPP"
+ echo "$ac_t""$CPP" 1>&4
  
! # If we cannot run a trivial program, we must be cross compiling.
! echo $ac_n "checking whether cross-compiling""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_c_cross'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   if test "$cross_compiling" = yes; then
!   ac_cv_cross=yes
! else
! cat > conftest.$ac_ext <<EOF
! #line 801 "configure"
  #include "confdefs.h"
! main(){return(0);}
  EOF
! eval $ac_link
  if test -s conftest && (./conftest; exit) 2>/dev/null; then
!   ac_cv_c_cross=no
  else
!   ac_cv_c_cross=yes
! fi
  fi
  rm -fr conftest*
+ fi
+ cross_compiling=$ac_cv_c_cross
+ echo "$ac_t""$ac_cv_c_cross" 1>&4
  
! echo $ac_n "checking for ANSI C header files""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_header_stdc'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   cat > conftest.$ac_ext <<EOF
! #line 822 "configure"
  #include "confdefs.h"
! #include <stdlib.h>
! #include <stdarg.h>
! #include <string.h>
! #include <float.h>
  EOF
! eval "$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! ac_err=`grep -v '^ *+' conftest.out`
! if test -z "$ac_err"; then
    rm -rf conftest*
!   ac_cv_header_stdc=yes
! else
!   echo "$ac_err" >&5
!   rm -rf conftest*
!   ac_cv_header_stdc=no
! fi
! rm -f conftest*
  
+ if test $ac_cv_header_stdc = yes; then
+   # SunOS 4.x string.h does not declare mem*, contrary to ANSI.
+ cat > conftest.$ac_ext <<EOF
+ #line 844 "configure"
+ #include "confdefs.h"
+ #include <string.h>
+ EOF
+ if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
+   egrep "memchr" >/dev/null 2>&1; then
+   :
+ else
+   rm -rf conftest*
+   ac_cv_header_stdc=no
  fi
  rm -f conftest*
  
  fi
  
! if test $ac_cv_header_stdc = yes; then
!   # ISC 2.0.2 stdlib.h does not declare free, contrary to ANSI.
! cat > conftest.$ac_ext <<EOF
! #line 862 "configure"
  #include "confdefs.h"
  #include <stdlib.h>
  EOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "free" >/dev/null 2>&1; then
!   :
! else
    rm -rf conftest*
!   ac_cv_header_stdc=no
! fi
! rm -f conftest*
! 
! fi
! 
! if test $ac_cv_header_stdc = yes; then
!   # /bin/cc in Irix-4.0.5 gets non-ANSI ctype macros unless using -ansi.
! if test "$cross_compiling" = yes; then
!   ac_cv_header_stdc=no
! else
! cat > conftest.$ac_ext <<EOF
! #line 883 "configure"
  #include "confdefs.h"
  #include <ctype.h>
  #define ISLOWER(c) ('a' <= (c) && (c) <= 'z')
  #define TOUPPER(c) (ISLOWER(c) ? 'A' + ((c) - 'a') : (c))
! #define XOR(e, f) (((e) && !(f)) || (!(e) && (f)))
  int main () { int i; for (i = 0; i < 256; i++)
  if (XOR (islower (i), ISLOWER (i)) || toupper (i) != TOUPPER (i)) exit(2);
***************
*** 464,566 ****
  
  EOF
! eval $compile
  if test -s conftest && (./conftest; exit) 2>/dev/null; then
!   
! {
! test -n "$verbose" && \
! echo "	defining STDC_HEADERS"
! echo "#define" STDC_HEADERS 1 >> confdefs.h
! DEFS="$DEFS -DSTDC_HEADERS=1"
! SEDDEFS="${SEDDEFS}\${SEDdA}STDC_HEADERS\${SEDdB}STDC_HEADERS\${SEDdC}1\${SEDdD}
! \${SEDuA}STDC_HEADERS\${SEDuB}STDC_HEADERS\${SEDuC}1\${SEDuD}
! \${SEDeA}STDC_HEADERS\${SEDeB}STDC_HEADERS\${SEDeC}1\${SEDeD}
! "
! }
! 
! 
  fi
  rm -fr conftest*
  
  fi
- rm -f conftest*
  
  
  fi
- rm -f conftest*
  
! for hdr in assert.h float.h limits.h memory.h pwd.h stdlib.h \
!                 string.h unistd.h
  do
! trhdr=HAVE_`echo $hdr | tr '[a-z]./' '[A-Z]__'`
! echo checking for ${hdr}
! cat > conftest.c <<EOF
  #include "confdefs.h"
! #include <${hdr}>
  EOF
! err=`eval "($CPP conftest.c >/dev/null) 2>&1"`
! if test -z "$err"; then
    rm -rf conftest*
!   
! {
! test -n "$verbose" && \
! echo "	defining ${trhdr}"
! echo "#define" ${trhdr} 1 >> confdefs.h
! DEFS="$DEFS -D${trhdr}=1"
! SEDDEFS="${SEDDEFS}\${SEDdA}${trhdr}\${SEDdB}${trhdr}\${SEDdC}1\${SEDdD}
! \${SEDuA}${trhdr}\${SEDuB}${trhdr}\${SEDuC}1\${SEDuD}
! \${SEDeA}${trhdr}\${SEDeB}${trhdr}\${SEDeC}1\${SEDeD}
! "
! }
! 
! 
  fi
  rm -f conftest*
  done
  
  
! for func in memmove putenv
  do
! trfunc=HAVE_`echo $func | tr '[a-z]' '[A-Z]'`
! echo checking for ${func}
! cat > conftest.c <<EOF
  #include "confdefs.h"
! #include <ctype.h>
! int main() { exit(0); }
! int t() { 
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
! #if defined (__stub_${func}) || defined (__stub___${func})
  choke me
  #else
! /* Override any gcc2 internal prototype to avoid an error.  */
! extern char ${func}(); ${func}();
  #endif
!  }
  EOF
! if eval $compile; then
    rm -rf conftest*
!   {
! test -n "$verbose" && \
! echo "	defining ${trfunc}"
! echo "#define" ${trfunc} 1 >> confdefs.h
! DEFS="$DEFS -D${trfunc}=1"
! SEDDEFS="${SEDDEFS}\${SEDdA}${trfunc}\${SEDdB}${trfunc}\${SEDdC}1\${SEDdD}
! \${SEDuA}${trfunc}\${SEDuB}${trfunc}\${SEDuC}1\${SEDuD}
! \${SEDeA}${trfunc}\${SEDeB}${trfunc}\${SEDeC}1\${SEDeD}
! "
! }
! 
! 
  fi
  rm -f conftest*
  done
  
  
! prog='/* Ultrix mips cc rejects this.  */
  typedef int charset[2]; const charset x;
  /* SunOS 4.1.1 cc rejects this.  */
  char const *const *ccp;
  char **p;
  /* AIX XL C 1.02.0.0 rejects this.
     It does not let you subtract one const X* pointer from another in an arm
--- 891,1050 ----
  
  EOF
! eval $ac_link
  if test -s conftest && (./conftest; exit) 2>/dev/null; then
!   :
! else
!   ac_cv_header_stdc=no
! fi
  fi
  rm -fr conftest*
+ fi
+ fi
+ echo "$ac_t""$ac_cv_header_stdc" 1>&4
+ if test $ac_cv_header_stdc = yes; then
+   cat >> confdefs.h <<\EOF
+ #define STDC_HEADERS 1
+ EOF
  
  fi
  
+ echo $ac_n "checking whether closedir returns void""... $ac_c" 1>&4
+ if eval "test \"`echo '${'ac_cv_func_closedir_void'+set}'`\" = set"; then
+   echo $ac_n "(cached) $ac_c" 1>&4
+ else
+   if test "$cross_compiling" = yes; then
+     { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
+ else
+ cat > conftest.$ac_ext <<EOF
+ #line 920 "configure"
+ #include "confdefs.h"
+ #include <sys/types.h>
+ #include <$ac_header_dirent>
+ int closedir(); main() { exit(closedir(opendir(".")) != 0); }
+ EOF
+ eval $ac_link
+ if test -s conftest && (./conftest; exit) 2>/dev/null; then
+   ac_cv_func_closedir_void=no
+ else
+   ac_cv_func_closedir_void=yes
+ fi
+ fi
+ rm -fr conftest*
+ fi
+ echo "$ac_t""$ac_cv_func_closedir_void" 1>&4
+ if test $ac_cv_func_closedir_void = yes; then
+   cat >> confdefs.h <<\EOF
+ #define CLOSEDIR_VOID 1
+ EOF
  
  fi
  
! for ac_hdr in assert.h float.h limits.h memory.h pwd.h stdlib.h \
!                  string.h unistd.h
  do
! ac_safe=`echo "$ac_hdr" | tr './\055' '___'`
! echo $ac_n "checking for $ac_hdr""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_header_$ac_safe'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   cat > conftest.$ac_ext <<EOF
! #line 952 "configure"
  #include "confdefs.h"
! #include <$ac_hdr>
  EOF
! eval "$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! ac_err=`grep -v '^ *+' conftest.out`
! if test -z "$ac_err"; then
    rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=yes"
! else
!   echo "$ac_err" >&5
!   rm -rf conftest*
!   eval "ac_cv_header_$ac_safe=no"
  fi
  rm -f conftest*
+ fi
+ if eval "test \"`echo '$ac_cv_header_'$ac_safe`\" = yes"; then
+   echo "$ac_t""yes" 1>&4
+     ac_tr_hdr=HAVE_`echo $ac_hdr | tr '[a-z]./\055' '[A-Z]___'`
+   cat >> confdefs.h <<EOF
+ #define $ac_tr_hdr 1
+ EOF
+  
+ else
+   echo "$ac_t""no" 1>&4
+ fi
  done
  
  
! for ac_func in basename bcopy memmove putenv
  do
! echo $ac_n "checking for $ac_func""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_func_$ac_func'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   cat > conftest.$ac_ext <<EOF
! #line 988 "configure"
  #include "confdefs.h"
! #include <ctype.h> /* Arbitrary system header to define __stub macros. */
! /* Override any gcc2 internal prototype to avoid an error.  */
! char $ac_func(); 
! 
! int main() { return 0; }
! int t() {
! 
  /* The GNU C library defines this for functions which it implements
      to always fail with ENOSYS.  Some functions are actually named
      something starting with __ and the normal name is an alias.  */
! #if defined (__stub_$ac_func) || defined (__stub___$ac_func)
  choke me
  #else
! $ac_func();
  #endif
! 
! ; return 0; }
  EOF
! if eval $ac_link; then
    rm -rf conftest*
!   eval "ac_cv_func_$ac_func=yes"
! else
!   rm -rf conftest*
!   eval "ac_cv_func_$ac_func=no"
  fi
  rm -f conftest*
+ 
+ fi
+ if eval "test \"`echo '$ac_cv_func_'$ac_func`\" = yes"; then
+   echo "$ac_t""yes" 1>&4
+     ac_tr_func=HAVE_`echo $ac_func | tr '[a-z]' '[A-Z]'`
+   cat >> confdefs.h <<EOF
+ #define $ac_tr_func 1
+ EOF
+  
+ else
+   echo "$ac_t""no" 1>&4
+ fi
  done
  
  
! echo $ac_n "checking for working const""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_c_const'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   cat > conftest.$ac_ext <<EOF
! #line 1036 "configure"
! #include "confdefs.h"
! 
! int main() { return 0; }
! int t() {
! 
! /* Ultrix mips cc rejects this.  */
  typedef int charset[2]; const charset x;
  /* SunOS 4.1.1 cc rejects this.  */
  char const *const *ccp;
  char **p;
+ /* NEC SVR4.0.2 mips cc rejects this.  */
+ struct point {int x, y;};
+ static struct point const zero;
  /* AIX XL C 1.02.0.0 rejects this.
     It does not let you subtract one const X* pointer from another in an arm
***************
*** 579,583 ****
  }
  { /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
!   int x[] = {25,17};
    const int *foo = &x[0];
    ++foo;
--- 1063,1067 ----
  }
  { /* Someone thinks the Sun supposedly-ANSI compiler will reject this.  */
!   int x[] = {25, 17};
    const int *foo = &x[0];
    ++foo;
***************
*** 595,647 ****
  { /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
    const int foo = 10;
! }'
! echo checking for lack of working const
! cat > conftest.c <<EOF
! #include "confdefs.h"
  
! int main() { exit(0); }
! int t() { $prog }
  EOF
! if eval $compile; then
!   :
  else
    rm -rf conftest*
!   
! {
! test -n "$verbose" && \
! echo "	defining" const to be empty
! echo "#define" const  >> confdefs.h
! DEFS="$DEFS -Dconst="
! SEDDEFS="${SEDDEFS}\${SEDdA}const\${SEDdB}const\${SEDdC}\${SEDdD}
! \${SEDuA}const\${SEDuB}const\${SEDuC}\${SEDuD}
! \${SEDeA}const\${SEDeB}const\${SEDeC}\${SEDeD}
! "
! }
  
  fi
  rm -f conftest*
  
  
  
  
  
! for p in 'bison -y' byacc
  do
! if test -z "$YACC"; then
!   # Extract the first word of `$p', so it can be a program name with args.
!   set dummy $p; word=$2
!   echo checking for $word
!   IFS="${IFS= 	}"; saveifs="$IFS"; IFS="${IFS}:"
!   for dir in $PATH; do
!     test -z "$dir" && dir=.
!     if test -f $dir/$word; then
!       YACC="$p"
        break
      fi
    done
!   IFS="$saveifs"
  fi
- 
- test -n "$YACC" && test -n "$verbose" && echo "	setting YACC to $YACC"
  
  test -n "$YACC" && break
--- 1079,1250 ----
  { /* ULTRIX-32 V3.1 (Rev 9) vcc rejects this */
    const int foo = 10;
! }
  
! ; return 0; }
  EOF
! if eval $ac_compile; then
!   rm -rf conftest*
!   ac_cv_c_const=yes
  else
    rm -rf conftest*
!   ac_cv_c_const=no
! fi
! rm -f conftest*
! 
! fi
! echo "$ac_t""$ac_cv_c_const" 1>&4
! if test $ac_cv_c_const = no; then
!   cat >> confdefs.h <<\EOF
! #define const 
! EOF
! 
! fi
! 
! 
! 
! # This is a GNU libc invention.
! echo $ac_n "checking whether program_invocation_name is predefined""... $ac_c" 1>&4
! if eval "test \"`echo '${'kb_cv_var_program_inv_name'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   cat > conftest.$ac_ext <<EOF
! #line 1112 "configure"
! #include "confdefs.h"
  
+ int main() { return 0; }
+ int t() {
+ main() { program_invocation_name = "love"; }
+ ; return 0; }
+ EOF
+ if eval $ac_link; then
+   rm -rf conftest*
+   kb_cv_var_program_inv_name=yes
+ else
+   rm -rf conftest*
+   kb_cv_var_program_inv_name=no
  fi
  rm -f conftest*
  
+ fi
+ echo "$ac_t""$kb_cv_var_program_inv_name" 1>&4
+ if test $kb_cv_var_program_inv_name = yes; then
+   cat >> confdefs.h <<\EOF
+ #define HAVE_PROGRAM_INVOCATION_NAME 1
+ EOF
+ 
+ fi
+ 
  
+ # Some BSD putenv's, e.g., FreeBSD, do malloc/free's on the environment.
+ # This test program is due to Mike Hibler <mike@cs.utah.edu>.
+ # We don't actually need to run this if we don't have putenv, but it
+ # doesn't hurt.
+ echo $ac_n "checking whether putenv uses malloc""... $ac_c" 1>&4
+ if eval "test \"`echo '${'kb_cv_func_putenv_malloc'+set}'`\" = set"; then
+   echo $ac_n "(cached) $ac_c" 1>&4
+ else
+   if test "$cross_compiling" = yes; then
+   kb_cv_func_putenv_malloc=no
+ else
+ cat > conftest.$ac_ext <<EOF
+ #line 1151 "configure"
+ #include "confdefs.h"
+ 
+ #define VAR	"YOW_VAR"
+ #define STRING1 "GabbaGabbaHey"
+ #define STRING2 "Yow!!"		/* should be shorter than STRING1 */
+ extern char *getenv (); /* in case char* and int don't mix gracefully */
+ main ()
+ {
+   char *str1, *rstr1, *str2, *rstr2;
+   str1 = getenv (VAR);
+   if (str1)
+     exit (1);
+   str1 = malloc (strlen (VAR) + 1 + strlen (STRING1) + 1);
+   if (str1 == 0)
+     exit (2);
+   strcpy (str1, VAR);
+   strcat (str1, "=");
+   strcat (str1, STRING1);
+   if (putenv (str1) < 0)
+     exit (3);
+   rstr1 = getenv (VAR);
+   if (rstr1 == 0)
+     exit (4);
+   rstr1 -= strlen (VAR) + 1;
+   if (strncmp (rstr1, VAR, strlen (VAR)))
+     exit (5);
+   str2 = malloc (strlen (VAR) + 1 + strlen (STRING2) + 1);
+   if (str2 == 0 || str1 == str2)
+     exit (6);
+   strcpy (str2, VAR);
+   strcat (str2, "=");
+   strcat (str2, STRING2);
+   if (putenv (str2) < 0)
+     exit (7);
+   rstr2 = getenv (VAR);
+   if (rstr2 == 0)
+     exit (8);
+   rstr2 -= strlen (VAR) + 1;
+ #if 0
+   printf ("rstr1=0x%x, rstr2=0x%x\n", rstr1, rstr2);
+   /*
+    * If string from first call was reused for the second call,
+    * you had better not do a free on the first string!
+    */
+   if (rstr1 == rstr2)
+           printf ("#define SMART_PUTENV\n");
+   else
+           printf ("#undef SMART_PUTENV\n");
+ #endif
+   exit (rstr1 == rstr2 ? 0 : 1);
+ }
+ EOF
+ eval $ac_link
+ if test -s conftest && (./conftest; exit) 2>/dev/null; then
+   kb_cv_func_putenv_malloc=yes
+ else
+   kb_cv_func_putenv_malloc=no
+ fi
+ fi
+ rm -fr conftest*
+ fi
+ echo "$ac_t""$kb_cv_func_putenv_malloc" 1>&4
+ if test $kb_cv_func_putenv_malloc = yes; then
+   cat >> confdefs.h <<\EOF
+ #define SMART_PUTENV 1
+ EOF
  
+ fi
  
  
! for ac_prog in 'bison -y' byacc
  do
! # Extract the first word of "$ac_prog", so it can be a program name with args.
! set dummy $ac_prog; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_prog_YACC'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   if test -n "$YACC"; then
!   ac_cv_prog_YACC="$YACC" # Let the user override the test.
! else
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
!   for ac_dir in $PATH; do
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_prog_YACC="$ac_prog"
        break
      fi
    done
!   IFS="$ac_save_ifs"
! fi
! fi
! YACC="$ac_cv_prog_YACC"
! if test -n "$YACC"; then
!   echo "$ac_t""$YACC" 1>&4
! else
!   echo "$ac_t""no" 1>&4
  fi
  
  test -n "$YACC" && break
***************
*** 649,713 ****
  test -n "$YACC" || YACC="yacc"
  
! if test -z "$LEX"; then
!   # Extract the first word of `flex', so it can be a program name with args.
!   set dummy flex; word=$2
!   echo checking for $word
!   IFS="${IFS= 	}"; saveifs="$IFS"; IFS="${IFS}:"
!   for dir in $PATH; do
!     test -z "$dir" && dir=.
!     if test -f $dir/$word; then
!       LEX="flex"
        break
      fi
    done
!   IFS="$saveifs"
  fi
- test -z "$LEX" && LEX="lex"
- test -n "$LEX" && test -n "$verbose" && echo "	setting LEX to $LEX"
  
  if test -z "$LEXLIB"
  then
    case "$LEX" in
!   flex*) LIBS_save="${LIBS}"
! LIBS="${LIBS} -lfl"
! have_lib=""
! echo checking for -lfl
! cat > conftest.c <<EOF
  #include "confdefs.h"
  
! int main() { exit(0); }
! int t() { main(); }
  EOF
! if eval $compile; then
    rm -rf conftest*
!   have_lib="1"
! 
  fi
  rm -f conftest*
! LIBS="${LIBS_save}"
! if test -n "${have_lib}"; then
!    :; LEXLIB="-lfl"
  else
!    :; 
  fi
!  ;;
!   *) LEXLIB="-ll" ;;
!   esac
  fi
  
! echo checking for ln -s
! rm -f conftestdata
  if ln -s X conftestdata 2>/dev/null
  then
    rm -f conftestdata
!   LN_S="ln -s"
  else
!   LN_S=ln
  fi
  
  
! 
! echo checking for return type of signal handlers
! cat > conftest.c <<EOF
  #include "confdefs.h"
  #include <sys/types.h>
--- 1252,1351 ----
  test -n "$YACC" || YACC="yacc"
  
! # Extract the first word of "flex", so it can be a program name with args.
! set dummy flex; ac_word=$2
! echo $ac_n "checking for $ac_word""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_prog_LEX'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   if test -n "$LEX"; then
!   ac_cv_prog_LEX="$LEX" # Let the user override the test.
! else
!   IFS="${IFS= 	}"; ac_save_ifs="$IFS"; IFS="${IFS}:"
!   for ac_dir in $PATH; do
!     test -z "$ac_dir" && ac_dir=.
!     if test -f $ac_dir/$ac_word; then
!       ac_cv_prog_LEX="flex"
        break
      fi
    done
!   IFS="$ac_save_ifs"
!   test -z "$ac_cv_prog_LEX" && ac_cv_prog_LEX="lex"
! fi
! fi
! LEX="$ac_cv_prog_LEX"
! if test -n "$LEX"; then
!   echo "$ac_t""$LEX" 1>&4
! else
!   echo "$ac_t""no" 1>&4
  fi
  
  if test -z "$LEXLIB"
  then
    case "$LEX" in
!   flex*) ac_lib=fl ;;
!   *) ac_lib=l ;;
!   esac
!   echo $ac_n "checking for -l$ac_lib""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_lib_$ac_lib'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   ac_save_LIBS="$LIBS"
! LIBS="$LIBS -l$ac_lib "
! cat > conftest.$ac_ext <<EOF
! #line 1296 "configure"
  #include "confdefs.h"
  
! int main() { return 0; }
! int t() {
! main()
! ; return 0; }
  EOF
! if eval $ac_link; then
    rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib=yes"
! else
!   rm -rf conftest*
!   eval "ac_cv_lib_$ac_lib=no"
  fi
  rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
! fi
! if eval "test \"`echo '$ac_cv_lib_'$ac_lib`\" = yes"; then
!   echo "$ac_t""yes" 1>&4
!   LEXLIB="-l$ac_lib"
  else
!   echo "$ac_t""no" 1>&4
  fi
! 
  fi
  
! echo $ac_n "checking whether ln -s works""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_prog_LN_S'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   rm -f conftestdata
  if ln -s X conftestdata 2>/dev/null
  then
    rm -f conftestdata
!   ac_cv_prog_LN_S="ln -s"
  else
!   ac_cv_prog_LN_S=ln
! fi
! fi
! LN_S="$ac_cv_prog_LN_S"
! if test "$ac_cv_prog_LN_S" = "ln -s"; then
!   echo "$ac_t""yes" 1>&4
! else
!   echo "$ac_t""no" 1>&4
  fi
  
  
! echo $ac_n "checking return type of signal handlers""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_type_signal'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   cat > conftest.$ac_ext <<EOF
! #line 1350 "configure"
  #include "confdefs.h"
  #include <sys/types.h>
***************
*** 717,815 ****
  #endif
  extern void (*signal ()) ();
! int main() { exit(0); }
! int t() { int i; }
  EOF
! if eval $compile; then
    rm -rf conftest*
!   
! {
! test -n "$verbose" && \
! echo "	defining" RETSIGTYPE to be void
! echo "#define" RETSIGTYPE void >> confdefs.h
! DEFS="$DEFS -DRETSIGTYPE=void"
! SEDDEFS="${SEDDEFS}\${SEDdA}RETSIGTYPE\${SEDdB}RETSIGTYPE\${SEDdC}void\${SEDdD}
! \${SEDuA}RETSIGTYPE\${SEDuB}RETSIGTYPE\${SEDuC}void\${SEDuD}
! \${SEDeA}RETSIGTYPE\${SEDeB}RETSIGTYPE\${SEDeC}void\${SEDeD}
! "
! }
! 
! 
  else
    rm -rf conftest*
!   
! {
! test -n "$verbose" && \
! echo "	defining" RETSIGTYPE to be int
! echo "#define" RETSIGTYPE int >> confdefs.h
! DEFS="$DEFS -DRETSIGTYPE=int"
! SEDDEFS="${SEDDEFS}\${SEDdA}RETSIGTYPE\${SEDdB}RETSIGTYPE\${SEDdC}int\${SEDdD}
! \${SEDuA}RETSIGTYPE\${SEDuB}RETSIGTYPE\${SEDuC}int\${SEDuD}
! \${SEDeA}RETSIGTYPE\${SEDeB}RETSIGTYPE\${SEDeC}int\${SEDeD}
! "
! }
! 
  fi
  rm -f conftest*
  
! 
! 
! echo checking for unsigned characters
! cat > conftest.c <<EOF
  #include "confdefs.h"
  /* volatile prevents gcc2 from optimizing the test away on sparcs.  */
! #if !__STDC__
  #define volatile
  #endif
  main() {
- #ifdef __CHAR_UNSIGNED__
-   exit(1); /* No need to redefine it.  */
- #else
    volatile char c = 255; exit(c < 0);
- #endif
  }
  EOF
! eval $compile
  if test -s conftest && (./conftest; exit) 2>/dev/null; then
!   
! {
! test -n "$verbose" && \
! echo "	defining __CHAR_UNSIGNED__"
! echo "#define" __CHAR_UNSIGNED__ 1 >> confdefs.h
! DEFS="$DEFS -D__CHAR_UNSIGNED__=1"
! SEDDEFS="${SEDDEFS}\${SEDdA}__CHAR_UNSIGNED__\${SEDdB}__CHAR_UNSIGNED__\${SEDdC}1\${SEDdD}
! \${SEDuA}__CHAR_UNSIGNED__\${SEDuB}__CHAR_UNSIGNED__\${SEDuC}1\${SEDuD}
! \${SEDeA}__CHAR_UNSIGNED__\${SEDeB}__CHAR_UNSIGNED__\${SEDeC}1\${SEDeD}
! "
! }
! 
! 
  fi
  rm -fr conftest*
  
! echo checking for 64-bit long ints
! cat > conftest.c <<EOF
  #include "confdefs.h"
  main() { exit(sizeof(long int) != 8); }
  EOF
! eval $compile
  if test -s conftest && (./conftest; exit) 2>/dev/null; then
!   
! {
! test -n "$verbose" && \
! echo "	defining LONG_64_BITS"
! echo "#define" LONG_64_BITS 1 >> confdefs.h
! DEFS="$DEFS -DLONG_64_BITS=1"
! SEDDEFS="${SEDDEFS}\${SEDdA}LONG_64_BITS\${SEDdB}LONG_64_BITS\${SEDdC}1\${SEDdD}
! \${SEDuA}LONG_64_BITS\${SEDuB}LONG_64_BITS\${SEDuC}1\${SEDuD}
! \${SEDeA}LONG_64_BITS\${SEDeB}LONG_64_BITS\${SEDeC}1\${SEDeD}
! "
! }
! 
  
  fi
  rm -fr conftest*
  
! echo checking byte ordering
! cat > conftest.c <<EOF
  #include "confdefs.h"
  main () {
--- 1355,1468 ----
  #endif
  extern void (*signal ()) ();
! int main() { return 0; }
! int t() {
! int i;
! ; return 0; }
! EOF
! if eval $ac_compile; then
!   rm -rf conftest*
!   ac_cv_type_signal=void
! else
!   rm -rf conftest*
!   ac_cv_type_signal=int
! fi
! rm -f conftest*
! 
! fi
! echo "$ac_t""$ac_cv_type_signal" 1>&4
! cat >> confdefs.h <<EOF
! #define RETSIGTYPE $ac_cv_type_signal
! EOF
! 
! 
! 
! echo $ac_n "checking whether char is unsigned""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_c_char_unsigned'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   if test "$GCC" = yes; then
!   # GCC predefines this symbol on systems where it applies.
! cat > conftest.$ac_ext <<EOF
! #line 1387 "configure"
! #include "confdefs.h"
! #ifdef __CHAR_UNSIGNED__
!   yes
! #endif
! 
  EOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "yes" >/dev/null 2>&1; then
    rm -rf conftest*
!   ac_cv_c_char_unsigned=yes
  else
    rm -rf conftest*
!   ac_cv_c_char_unsigned=no
  fi
  rm -f conftest*
  
! else
! if test "$cross_compiling" = yes; then
!     { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
! else
! cat > conftest.$ac_ext <<EOF
! #line 1409 "configure"
  #include "confdefs.h"
  /* volatile prevents gcc2 from optimizing the test away on sparcs.  */
! #if !defined(__STDC__) || __STDC__ != 1
  #define volatile
  #endif
  main() {
    volatile char c = 255; exit(c < 0);
  }
  EOF
! eval $ac_link
  if test -s conftest && (./conftest; exit) 2>/dev/null; then
!   ac_cv_c_char_unsigned=yes
! else
!   ac_cv_c_char_unsigned=no
! fi
  fi
  rm -fr conftest*
+ fi
+ fi
+ echo "$ac_t""$ac_cv_c_char_unsigned" 1>&4
+ if test $ac_cv_c_char_unsigned = yes && test "$GCC" != yes; then
+   cat >> confdefs.h <<\EOF
+ #define __CHAR_UNSIGNED__ 1
+ EOF
  
! fi
! 
! echo $ac_n "checking whether long int is 64 bits""... $ac_c" 1>&4
! if test "$cross_compiling" = yes; then
!     { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
! else
! cat > conftest.$ac_ext <<EOF
! #line 1442 "configure"
  #include "confdefs.h"
  main() { exit(sizeof(long int) != 8); }
  EOF
! eval $ac_link
  if test -s conftest && (./conftest; exit) 2>/dev/null; then
!   echo "$ac_t""yes" 1>&4
!  cat >> confdefs.h <<\EOF
! #define LONG_64_BITS 1
! EOF
  
+ else
+   echo "$ac_t""no" 1>&4
+ fi
  fi
  rm -fr conftest*
  
! echo $ac_n "checking whether byte ordering is bigendian""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_c_bigendian'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   if test "$cross_compiling" = yes; then
!     { echo "configure: error: can not run test program while cross compiling" 1>&2; exit 1; }
! else
! cat > conftest.$ac_ext <<EOF
! #line 1467 "configure"
  #include "confdefs.h"
  main () {
***************
*** 824,974 ****
  }
  EOF
! eval $compile
  if test -s conftest && (./conftest; exit) 2>/dev/null; then
!   :
  else
!   
! {
! test -n "$verbose" && \
! echo "	defining WORDS_BIGENDIAN"
! echo "#define" WORDS_BIGENDIAN 1 >> confdefs.h
! DEFS="$DEFS -DWORDS_BIGENDIAN=1"
! SEDDEFS="${SEDDEFS}\${SEDdA}WORDS_BIGENDIAN\${SEDdB}WORDS_BIGENDIAN\${SEDdC}1\${SEDdD}
! \${SEDuA}WORDS_BIGENDIAN\${SEDuB}WORDS_BIGENDIAN\${SEDuC}1\${SEDuD}
! \${SEDeA}WORDS_BIGENDIAN\${SEDeB}WORDS_BIGENDIAN\${SEDeC}1\${SEDeD}
! "
! }
! 
  fi
  rm -fr conftest*
  
  
! echo checking how to declare yytext
! # Figure out what yytext is by creating a minimal parser and
! # examining the (preprocessed, in case macros are used) output.
! if test "z${DECLARE_YYTEXT}" = "z"; then
!   echo '%%
! %%' | ${LEX}
!   if test -f lex.yy.c; then
!     LEX_OUTPUT_ROOT=lex.yy
!   elif test -f lexyy.c; then
!     LEX_OUTPUT_ROOT=lexyy
!   else
!     # Don't know what to do here.
!     echo "Can't find output from $LEX; assuming lex.yy.c." 1>&2
!     LEX_OUTPUT_ROOT=lex.yy
!   fi
!   DECLARE_YYTEXT=`eval ${CPP} "${LEX_OUTPUT_ROOT}.c" |
!     sed -n '/extern.*yytext[^a-zA-Z0-9_]/s/^.*extern/extern/p'`
!   rm -f "${LEX_OUTPUT_ROOT}.c"
  fi
  
- {
- test -n "$verbose" && \
- echo "	defining" DECLARE_YYTEXT to be $DECLARE_YYTEXT
- echo "#define" DECLARE_YYTEXT $DECLARE_YYTEXT >> confdefs.h
- DEFS="$DEFS -DDECLARE_YYTEXT=$DECLARE_YYTEXT"
- SEDDEFS="${SEDDEFS}\${SEDdA}DECLARE_YYTEXT\${SEDdB}DECLARE_YYTEXT\${SEDdC}$DECLARE_YYTEXT\${SEDdD}
- \${SEDuA}DECLARE_YYTEXT\${SEDuB}DECLARE_YYTEXT\${SEDuC}$DECLARE_YYTEXT\${SEDuD}
- \${SEDeA}DECLARE_YYTEXT\${SEDeB}DECLARE_YYTEXT\${SEDeC}$DECLARE_YYTEXT\${SEDeD}
- "
- }
  
  
! echo checking for window system libraries
! cat > conftest.c <<EOF
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifndef SUNWIN
! #include <nonexistxyz.kkk>
  #endif
  
  EOF
! err=`eval "($CPP conftest.c >/dev/null) 2>&1"`
! if test -z "$err"; then
    rm -rf conftest*
!   SUNWIN=t
! 
! 
  fi
  rm -f conftest*
! cat > conftest.c <<EOF
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifndef XVIEWWIN
! #include <nonexistxyz.kkk>
  #endif
  
  EOF
! err=`eval "($CPP conftest.c >/dev/null) 2>&1"`
! if test -z "$err"; then
    rm -rf conftest*
!   XVIEWWIN=t
! 
! 
  fi
  rm -f conftest*
! cat > conftest.c <<EOF
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifndef X11WIN
! #include <nonexistxyz.kkk>
  #endif
  
  EOF
! err=`eval "($CPP conftest.c >/dev/null) 2>&1"`
! if test -z "$err"; then
    rm -rf conftest*
!   X11WIN=t
! 
! 
  fi
  rm -f conftest*
! cat > conftest.c <<EOF
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifndef X10WIN
! #include <nonexistxyz.kkk>
  #endif
  
  EOF
! err=`eval "($CPP conftest.c >/dev/null) 2>&1"`
! if test -z "$err"; then
    rm -rf conftest*
!   X10WIN=t
! 
! 
  fi
  rm -f conftest*
! if test -n "$XVIEWWIN"; then
    wlibs="-lxview -lolgx -lX11 $wlibs"
    (cd $srcdir/mf/MFwindow; rm -f sun.c; $LN_S sun-xview.c sun.c)
  fi
! if test -n "$X11WIN"; then
!   # If we find X, set shell vars x_includes and x_libraries to the paths.
! no_x=true
! echo checking for X include and library files with xmkmf
  rm -fr conftestdir
  if mkdir conftestdir; then
    cd conftestdir
!   cat > Imakefile <<\EOF
  acfindx:
! 	@echo "im_incroot=$(INCROOT); im_usrlibdir=$(USRLIBDIR); im_libdir=$(LIBDIR)"
  EOF
    if (xmkmf) >/dev/null 2>/dev/null && test -f Makefile; then
      no_x=
      # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
!     eval `make acfindx | grep -v make`
      # Open Windows xmkmf reportedly sets LIBDIR instead of USRLIBDIR.
!     if test ! -f $im_usrlibdir/libX11.a && test -f $im_libdir/libX11.a; then
!       im_usrlibdir=$im_libdir
      fi
!     case "$im_incroot" in
  	/usr/include) ;;
! 	*) x_includes="$im_incroot" ;;
      esac
!     case "$im_usrlibdir" in
  	/usr/lib | /lib) ;;
! 	*) x_libraries="$im_usrlibdir" ;;
      esac
    fi
--- 1477,1694 ----
  }
  EOF
! eval $ac_link
  if test -s conftest && (./conftest; exit) 2>/dev/null; then
!   ac_cv_c_bigendian=no
  else
!   ac_cv_c_bigendian=yes
! fi
  fi
  rm -fr conftest*
+ fi
+ echo "$ac_t""$ac_cv_c_bigendian" 1>&4
+ if test $ac_cv_c_bigendian = yes; then
+   cat >> confdefs.h <<\EOF
+ #define WORDS_BIGENDIAN 1
+ EOF
  
+ fi
  
! 
! if eval "test \"`echo '${'ac_cv_prog_lex_output_root'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   # The minimal lex program is just a single line: %%.  But some broken lexes
! # (Solaris, I think it was) want two %% lines, so accommodate them.
! echo '%%
! %%' | $LEX
! if test -f lex.yy.c; then
!   ac_cv_prog_lex_output_root=lex.yy
! elif test -f lexyy.c; then
!   ac_cv_prog_lex_output_root=lexyy
! else
!   { echo "configure: error: cannot find output from $LEX, giving up" 1>&2; exit 1; }
  fi
+ fi
+ LEX_OUTPUT_ROOT=$ac_cv_prog_lex_output_root
+ echo $ac_n "checking for yytext declaration""... $ac_c" 1>&4
+ if eval "test \"`echo '${'ac_cv_prog_lex_yytext_pointer'+set}'`\" = set"; then
+   echo $ac_n "(cached) $ac_c" 1>&4
+ else
+   # POSIX says lex can declare yytext either as a pointer or an array; the
+ # default is implementation-dependent. Figure out which it is, since
+ # not all implementations provide the %pointer and %array declarations.
+ ac_cv_prog_lex_yytext_pointer=no
+ echo 'extern char *yytext;' >>$LEX_OUTPUT_ROOT.c
+ ac_save_LIBS="$LIBS"
+ LIBS="$LIBS $LEXLIB"
+ cat > conftest.$ac_ext <<EOF
+ #line 1526 "configure"
+ #include "confdefs.h"
+ `cat $LEX_OUTPUT_ROOT.c`
+ int main() { return 0; }
+ int t() {
+ 
+ ; return 0; }
+ EOF
+ if eval $ac_link; then
+   rm -rf conftest*
+   ac_cv_prog_lex_yytext_pointer=yes
+ fi
+ rm -f conftest*
+ 
+ LIBS="$ac_save_LIBS"
+ rm -f "${LEX_OUTPUT_ROOT}.c"
+ fi
+ echo "$ac_t""$ac_cv_prog_lex_yytext_pointer" 1>&4
+ if test $ac_cv_prog_lex_yytext_pointer = yes; then
+   cat >> confdefs.h <<\EOF
+ #define YYTEXT_POINTER 1
+ EOF
+ 
+ fi
+ 
  
  
  
! echo $ac_n "checking for sunwindow libraries""... $ac_c" 1>&4
! cat > conftest.$ac_ext <<EOF
! #line 1556 "configure"
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifdef SUNWIN
!   yes
  #endif
  
  EOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "yes" >/dev/null 2>&1; then
    rm -rf conftest*
!   SUNWIN=yes
! else
!   rm -rf conftest*
!   SUNWIN=no
  fi
  rm -f conftest*
! 
! echo "$ac_t""$SUNWIN" 1>&4
! 
! echo $ac_n "checking for xview libraries""... $ac_c" 1>&4
! cat > conftest.$ac_ext <<EOF
! #line 1578 "configure"
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifdef XVIEWWIN
!   yes
  #endif
  
  EOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "yes" >/dev/null 2>&1; then
    rm -rf conftest*
!   XVIEWWIN=yes
! else
!   rm -rf conftest*
!   XVIEWWIN=no
  fi
  rm -f conftest*
! 
! echo "$ac_t""$XVIEWWIN" 1>&4
! 
! echo $ac_n "checking for X11 libraries""... $ac_c" 1>&4
! cat > conftest.$ac_ext <<EOF
! #line 1600 "configure"
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifdef X11WIN
!   yes
  #endif
  
  EOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "yes" >/dev/null 2>&1; then
    rm -rf conftest*
!   X11WIN=yes
! else
!   rm -rf conftest*
!   X11WIN=no
  fi
  rm -f conftest*
! 
! echo "$ac_t""$X11WIN" 1>&4
! 
! echo $ac_n "checking for X10 libraries""... $ac_c" 1>&4
! cat > conftest.$ac_ext <<EOF
! #line 1622 "configure"
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifdef X10WIN
!   yes
  #endif
  
  EOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "yes" >/dev/null 2>&1; then
    rm -rf conftest*
!   X10WIN=yes
! else
!   rm -rf conftest*
!   X10WIN=no
  fi
  rm -f conftest*
! 
! echo "$ac_t""$X10WIN" 1>&4
! 
! if test $XVIEWWIN = yes; then
    wlibs="-lxview -lolgx -lX11 $wlibs"
    (cd $srcdir/mf/MFwindow; rm -f sun.c; $LN_S sun-xview.c sun.c)
  fi
! if test $X11WIN = yes; then
!   # If we find X, set shell vars x_includes and x_libraries to the
! # paths, otherwise set no_x=yes.
! # Uses ac_ vars as temps to allow command line to override cache and checks.
! # --without-x overrides everything else, but does not touch the cache.
! echo $ac_n "checking for X""... $ac_c" 1>&4
! 
! # Check whether --with-x or --without-x was given.
! withval="$with_x"
! if test -n "$withval"; then
!   :
! fi
! 
! if test "x$with_x" = xno; then
!   no_x=yes
! else
!   if test "x$x_includes" != xNONE && test "x$x_libraries" != xNONE; then
!     no_x=
!   else
! if eval "test \"`echo '${'ac_cv_path_x'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   # One or both of the vars are not set, and there is no cached value.
! no_x=yes
  rm -fr conftestdir
  if mkdir conftestdir; then
    cd conftestdir
!   # Make sure to not put "make" in the Imakefile rules, since we grep it out.
!   cat > Imakefile <<'EOF'
  acfindx:
! 	@echo 'ac_im_incroot="${INCROOT}"; ac_im_usrlibdir="${USRLIBDIR}"; ac_im_libdir="${LIBDIR}"'
  EOF
    if (xmkmf) >/dev/null 2>/dev/null && test -f Makefile; then
      no_x=
      # GNU make sometimes prints "make[1]: Entering...", which would confuse us.
!     eval `make acfindx 2>/dev/null | grep -v make`
      # Open Windows xmkmf reportedly sets LIBDIR instead of USRLIBDIR.
!     if test ! -f $ac_im_usrlibdir/libX11.a && test -f $ac_im_libdir/libX11.a
!     then
!       ac_im_usrlibdir=$ac_im_libdir
      fi
!     case "$ac_im_incroot" in
  	/usr/include) ;;
! 	*) ac_x_includes="$ac_im_incroot" ;;
      esac
!     case "$ac_im_usrlibdir" in
  	/usr/lib | /lib) ;;
! 	*) ac_x_libraries="$ac_im_usrlibdir" ;;
      esac
    fi
***************
*** 977,1009 ****
  fi
  
! if test -z "$im_usrlibdir"; then
! echo checking for X include and library files directly
! cat > conftest.c <<EOF
! #include "confdefs.h"
! #include <X11/Intrinsic.h>
! EOF
! err=`eval "($CPP conftest.c >/dev/null) 2>&1"`
! if test -z "$err"; then
    rm -rf conftest*
!   no_x=
! 
  else
    rm -rf conftest*
!   for dir in \
!     /usr/local/include \
!     /usr/unsupported/include \
!     /usr/x386/include \
!     /usr/local/x11r5/include \
!     /usr/include/X11R5 \
!     /usr/include/X11R4 \
!     /usr/X11R5/include \
!     /usr/X11/include \
!     /usr/openwin/include \
      /usr/openwin/share/include \
-     /usr/lpp/Xamples/include \
      ; \
    do
!     if test -r $dir/X11/Intrinsic.h; then
!       x_includes=$dir; no_x=
        break
      fi
--- 1697,1756 ----
  fi
  
! if test "$no_x" = yes; then
! test -z "$x_direct_test_library" && x_direct_test_library=Xt
! test -z "$x_direct_test_function" && x_direct_test_function=XtMalloc
! test -z "$x_direct_test_include" && x_direct_test_include=X11/Intrinsic.h
! cat > conftest.$ac_ext <<EOF
! #line 1705 "configure"
! #include "confdefs.h"
! #include <$x_direct_test_include>
! EOF
! eval "$ac_cpp conftest.$ac_ext >/dev/null 2>conftest.out"
! ac_err=`grep -v '^ *+' conftest.out`
! if test -z "$ac_err"; then
    rm -rf conftest*
!   no_x= ac_x_includes=
  else
+   echo "$ac_err" >&5
    rm -rf conftest*
!     for ac_dir in               \
!     /usr/X11R6/include        \
!     /usr/X11R5/include        \
!     /usr/X11R4/include        \
!                               \
!     /usr/include/X11R6        \
!     /usr/include/X11R5        \
!     /usr/include/X11R4        \
!                               \
!     /usr/local/X11R6/include  \
!     /usr/local/X11R5/include  \
!     /usr/local/X11R4/include  \
!                               \
!     /usr/local/include/X11R6  \
!     /usr/local/include/X11R5  \
!     /usr/local/include/X11R4  \
!                               \
!     /usr/X11/include          \
!     /usr/include/X11          \
!     /usr/local/X11/include    \
!     /usr/local/include/X11    \
!                               \
!     /usr/X386/include         \
!     /usr/x386/include         \
!     /usr/XFree86/include/X11  \
!                               \
!     /usr/include              \
!     /usr/local/include        \
!     /usr/unsupported/include  \
!     /usr/athena/include       \
!     /usr/local/x11r5/include  \
!     /usr/lpp/Xamples/include  \
!                               \
!     /usr/openwin/include      \
      /usr/openwin/share/include \
      ; \
    do
!     if test -r "$ac_dir/$x_direct_test_include"; then
!       no_x= ac_x_includes=$ac_dir
        break
      fi
***************
*** 1012,1053 ****
  rm -f conftest*
  
! # Check for the libraries.  First see if replacing the `include' by
! # `lib' works.
! LIBS_save="${LIBS}"
! LIBS="${LIBS} -lXt"
! have_lib=""
! echo checking for -lXt
! cat > conftest.c <<EOF
! #include "confdefs.h"
! 
! int main() { exit(0); }
! int t() { main(); }
! EOF
! if eval $compile; then
!   rm -rf conftest*
!   have_lib="1"
! 
! fi
! rm -f conftest*
! LIBS="${LIBS_save}"
! if test -n "${have_lib}"; then
!    :; no_x=
! else
!    :; for dir in `echo "$x_includes" | sed s/include/lib/` \
!   /usr/local/lib \
!   /usr/unsupported/lib \
!   /usr/x386/lib \
!   /usr/local/x11r5/lib \
!   /usr/lib/X11 \
!   /usr/lib/X11R4 \
!   /usr/X11R5/lib \
!   /usr/X11/lib \
!   /usr/openwin/lib \
!   /usr/lpp/Xamples/lib \
!   ; \
  do
!   for extension in a so sl; do
!     if test -r $dir/libXt.$extension; then
!       x_libraries=$dir; no_x=
        break 2
      fi
--- 1759,1823 ----
  rm -f conftest*
  
! # Check for the libraries.
! # See if we find them without any special options.
! # Don't add to $LIBS permanently.
! ac_save_LIBS="$LIBS"
! LIBS="$LIBS -l$x_direct_test_library"
! cat > conftest.$ac_ext <<EOF
! #line 1768 "configure"
! #include "confdefs.h"
! 
! int main() { return 0; }
! int t() {
! ${x_direct_test_function}()
! ; return 0; }
! EOF
! if eval $ac_link; then
!   rm -rf conftest*
!   LIBS="$ac_save_LIBS" no_x= ac_x_libraries=
! else
!   rm -rf conftest*
!   LIBS="$ac_save_LIBS"
! # First see if replacing the include by lib works.
! for ac_dir in `echo "$ac_x_includes" | sed s/include/lib/` \
!     /usr/X11R6/lib        \
!     /usr/X11R5/lib        \
!     /usr/X11R4/lib        \
!                           \
!     /usr/lib/X11R6        \
!     /usr/lib/X11R5        \
!     /usr/lib/X11R4        \
!                           \
!     /usr/local/X11R6/lib  \
!     /usr/local/X11R5/lib  \
!     /usr/local/X11R4/lib  \
!                           \
!     /usr/local/lib/X11R6  \
!     /usr/local/lib/X11R5  \
!     /usr/local/lib/X11R4  \
!                           \
!     /usr/X11/lib          \
!     /usr/lib/X11          \
!     /usr/local/X11/lib    \
!     /usr/local/lib/X11    \
!                           \
!     /usr/X386/lib         \
!     /usr/x386/lib         \
!     /usr/XFree86/lib/X11  \
!                           \
!     /usr/lib              \
!     /usr/local/lib        \
!     /usr/unsupported/lib  \
!     /usr/athena/lib       \
!     /usr/local/x11r5/lib  \
!     /usr/lpp/Xamples/lib  \
!                           \
!     /usr/openwin/lib      \
!     /usr/openwin/share/lib \
!     ; \
  do
!   for ac_extension in a so sl; do
!     if test -r $ac_dir/lib${x_direct_test_library}.$ac_extension; then
!       no_x= ac_x_libraries=$ac_dir
        break 2
      fi
***************
*** 1055,1207 ****
  done
  fi
  
  fi
! if test -n "$verbose"; then
!   test -n "$x_includes" && echo "	found X11 headers in $x_includes"
!   test -n "$x_libraries" && echo "	found X11 libraries in $x_libraries"
! fi
!   
! if test -n "$x_includes"; then
!   x_include_flags=-I$x_includes
! elif test -n "$no_x"; then 
!   # Not all programs may use this symbol, but it won't hurt to define it.
!   x_include_flags=-DX_DISPLAY_MISSING
  fi
- #
- # It would be nice to have a more robust check for the -R ld option then
- # just checking for Solaris.
- # 
- # It would also be nice to do this for all -L options, not just this one.
- if test -n "$x_libraries"; then
-   x_lib_flags=-L$x_libraries
-   if test "`uname 2>/dev/null`" = SunOS \
-      && uname -r | grep '^5' >/dev/null; then
-     x_lib_flags="$x_lib_flags -R$x_libraries"
    fi
  fi
! #
! # Check for additional X libraries.
! # 
! # Since we already have an explicit check for POSIXified ISC, assume
! # it's been used.
! if test -n "$ISC"; then
!   x_extra_libs="$x_extra_libs -lnsl_s -linet"
!   test -n "$verbose" && echo "	adding -lnsl_s -linet to x_extra_libs (for ISC)"
  else
!   # Martyn.Johnson@cl.cam.ac.uk says this is needed for Ultrix, if the X
!   # libraries were built with DECnet support.  And karl@cs.umb.edu's Alpha
!   # needs dnet_stub.
!   LIBS_save="${LIBS}"
! LIBS="${LIBS} -ldnet"
! have_lib=""
! echo checking for -ldnet
! cat > conftest.c <<EOF
  #include "confdefs.h"
  
! int main() { exit(0); }
! int t() { main(); }
  EOF
! if eval $compile; then
    rm -rf conftest*
!   have_lib="1"
! 
  fi
  rm -f conftest*
! LIBS="${LIBS_save}"
! if test -n "${have_lib}"; then
!    :; x_extra_libs="$x_extra_libs -ldnet"
!      have_dnet=t
!      test -n "$verbose" && echo "	adding -ldnet to x_extra_libs"
  else
!    :; 
  fi
  
!   if test -z "$have_dnet"; then
!     LIBS_save="${LIBS}"
! LIBS="${LIBS} -ldnet_stub"
! have_lib=""
! echo checking for -ldnet_stub
! cat > conftest.c <<EOF
  #include "confdefs.h"
  
! int main() { exit(0); }
! int t() { main(); }
  EOF
! if eval $compile; then
    rm -rf conftest*
!   have_lib="1"
! 
  fi
  rm -f conftest*
! LIBS="${LIBS_save}"
! if test -n "${have_lib}"; then
!    :; x_extra_libs="$x_extra_libs -ldnet_stub"
!        test -n "$verbose" && echo "	adding -ldnet_stub to x_extra_libs"
  else
!    :; 
  fi
  
!   fi
!   # lieder@skyler.mavd.honeywell.com says without -lsocket,
!   # socket/setsockopt and other routines are undefined under SCO ODT 2.0.
!   LIBS_save="${LIBS}"
! LIBS="${LIBS} -lsocket"
! have_lib=""
! echo checking for -lsocket
! cat > conftest.c <<EOF
  #include "confdefs.h"
  
! int main() { exit(0); }
! int t() { main(); }
  EOF
! if eval $compile; then
    rm -rf conftest*
!   have_lib="1"
! 
  fi
  rm -f conftest*
! LIBS="${LIBS_save}"
! if test -n "${have_lib}"; then
!    :; x_extra_libs="$x_extra_libs -lsocket"
!      test -n "$verbose" && echo "	adding -lsocket to x_extra_libs"
  else
!    :; 
  fi
  
! fi
! #
  
!   if test -z "$Xextlib"; then
!     LIBS_save="${LIBS}"
! LIBS="${LIBS} -lXext"
! have_lib=""
! echo checking for -lXext
! cat > conftest.c <<EOF
  #include "confdefs.h"
  
! int main() { exit(0); }
! int t() { main(); }
  EOF
! if eval $compile; then
    rm -rf conftest*
!   have_lib="1"
  
  fi
  rm -f conftest*
! LIBS="${LIBS_save}"
! if test -n "${have_lib}"; then
!    :; Xextlib=-lXext
  else
!    :; 
  fi
  
    fi
!   wlibs="-lXt $Xextlib -lX11 $wlibs"
    (cd $srcdir/mf/MFwindow; rm -f x11.c; $LN_S x11-Xt.c x11.c)
  fi
! if test -n "$X10WIN"; then
    wlibs="-lX $wlibs"
  fi
! if test -n "$SUNWIN"; then
    wlibs="-lsuntool -lsunwindow -lpixrect $wlibs"
    (cd $srcdir/mf/MFwindow; rm -f sun.c; $LN_S sun-sunview.c sun.c)
--- 1825,2077 ----
  done
  fi
+ rm -f conftest*
  
  fi
! if test "$no_x" = yes; then
!   ac_cv_path_x="no_x=yes"
! else
!   ac_cv_path_x="no_x= ac_x_includes=$ac_x_includes ac_x_libraries=$ac_x_libraries"
! fi
  fi
    fi
+   eval "$ac_cv_path_x"
+ fi # $with_x != no
+ 
+ if test "$no_x" = yes; then
+   echo "$ac_t""no" 1>&4
+ else
+   test "x$x_includes" = xNONE && x_includes=$ac_x_includes
+   test "x$x_libraries" = xNONE && x_libraries=$ac_x_libraries
+   ac_cv_path_x="no_x= ac_x_includes=$x_includes ac_x_libraries=$x_libraries"
+   echo "$ac_t""libraries $x_libraries, headers $x_includes" 1>&4
  fi
! 
!   if test "$no_x" = yes; then 
!   # Not all programs may use this symbol, but it does not hurt to define it.
!   X_CFLAGS="$X_CFLAGS -DX_DISPLAY_MISSING"
! else
!   if test -n "$x_includes"; then
!     X_CFLAGS="$X_CFLAGS -I$x_includes"
!   fi
! 
!   # It would be nice to have a more robust check for the -R ld option than
!   # just checking for Solaris.
!   # It would also be nice to do this for all -L options, not just this one.
!   if test -n "$x_libraries"; then
!     X_LIBS="$X_LIBS -L$x_libraries"
!     if test "`(uname) 2>/dev/null`" = SunOS &&
!       uname -r | grep '^5' >/dev/null; then
!       X_LIBS="$X_LIBS -R$x_libraries"
!     fi
!   fi
! 
!   # Check for libraries that X11R6 Xt/Xaw programs need.
! 
!   ac_save_LDFLAGS="$LDFLAGS"
!   LDFLAGS="$LDFLAGS -L$x_libraries"
!   # SM needs ICE to (dynamically) link under SunOS 4.x (so we have to
!   # check for ICE first), but we must link in the order -lSM -lICE or
!   # we get undefined symbols.  So assume we have SM if we have ICE.
!   # These have to be linked with before -lX11, unlike the other
!   # libraries we check for below, so use a different variable.
!   #  --interran@uluru.Stanford.EDU, kb@cs.umb.edu.
!   echo $ac_n "checking for -lICE""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_lib_ICE'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
  else
!   ac_save_LIBS="$LIBS"
! LIBS="$LIBS -lICE "
! cat > conftest.$ac_ext <<EOF
! #line 1886 "configure"
  #include "confdefs.h"
  
! int main() { return 0; }
! int t() {
! IceConnectionNumber()
! ; return 0; }
  EOF
! if eval $ac_link; then
    rm -rf conftest*
!   eval "ac_cv_lib_ICE=yes"
! else
!   rm -rf conftest*
!   eval "ac_cv_lib_ICE=no"
  fi
  rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
! fi
! if eval "test \"`echo '$ac_cv_lib_'ICE`\" = yes"; then
!   echo "$ac_t""yes" 1>&4
!   X_PRE_LIBS="$X_PRE_LIBS -lSM -lICE"
  else
!   echo "$ac_t""no" 1>&4
  fi
  
!   LDFLAGS="$ac_save_LDFLAGS"
! 
!   # Check for system-dependent libraries X programs must link with.
! 
!   if test "$ISC" = yes; then
!     X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl_s -linet"
!   else
!     # Martyn.Johnson@cl.cam.ac.uk says this is needed for Ultrix, if the X
!     # libraries were built with DECnet support.  And karl@cs.umb.edu says
!     # the Alpha needs dnet_stub (dnet does not exist).
!     echo $ac_n "checking for -ldnet""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_lib_dnet'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   ac_save_LIBS="$LIBS"
! LIBS="$LIBS -ldnet "
! cat > conftest.$ac_ext <<EOF
! #line 1929 "configure"
  #include "confdefs.h"
  
! int main() { return 0; }
! int t() {
! dnet_ntoa()
! ; return 0; }
  EOF
! if eval $ac_link; then
    rm -rf conftest*
!   eval "ac_cv_lib_dnet=yes"
! else
!   rm -rf conftest*
!   eval "ac_cv_lib_dnet=no"
  fi
  rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
! fi
! if eval "test \"`echo '$ac_cv_lib_'dnet`\" = yes"; then
!   echo "$ac_t""yes" 1>&4
!   X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet"
  else
!   echo "$ac_t""no" 1>&4
  fi
  
!     if test $ac_cv_lib_dnet = no; then
!       echo $ac_n "checking for -ldnet_stub""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_lib_dnet_stub'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   ac_save_LIBS="$LIBS"
! LIBS="$LIBS -ldnet_stub "
! cat > conftest.$ac_ext <<EOF
! #line 1963 "configure"
  #include "confdefs.h"
  
! int main() { return 0; }
! int t() {
! dnet_ntoa()
! ; return 0; }
  EOF
! if eval $ac_link; then
    rm -rf conftest*
!   eval "ac_cv_lib_dnet_stub=yes"
! else
!   rm -rf conftest*
!   eval "ac_cv_lib_dnet_stub=no"
  fi
  rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
! fi
! if eval "test \"`echo '$ac_cv_lib_'dnet_stub`\" = yes"; then
!   echo "$ac_t""yes" 1>&4
!   X_EXTRA_LIBS="$X_EXTRA_LIBS -ldnet_stub"
  else
!   echo "$ac_t""no" 1>&4
  fi
  
!     fi
  
!     # msh@cis.ufl.edu says -lnsl (and -lsocket) are needed for his 386/AT,
!     # to get the SysV transport functions.
!     # Not sure which flavor of 386 UNIX this is, but it seems harmless to
!     # check for it.
!     echo $ac_n "checking for -lnsl""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_lib_nsl'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   ac_save_LIBS="$LIBS"
! LIBS="$LIBS -lnsl "
! cat > conftest.$ac_ext <<EOF
! #line 2002 "configure"
  #include "confdefs.h"
  
! int main() { return 0; }
! int t() {
! t_accept()
! ; return 0; }
  EOF
! if eval $ac_link; then
!   rm -rf conftest*
!   eval "ac_cv_lib_nsl=yes"
! else
    rm -rf conftest*
!   eval "ac_cv_lib_nsl=no"
! fi
! rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
! fi
! if eval "test \"`echo '$ac_cv_lib_'nsl`\" = yes"; then
!   echo "$ac_t""yes" 1>&4
!   X_EXTRA_LIBS="$X_EXTRA_LIBS -lnsl"
! else
!   echo "$ac_t""no" 1>&4
! fi
! 
! 
!     # lieder@skyler.mavd.honeywell.com says without -lsocket,
!     # socket/setsockopt and other routines are undefined under SCO ODT 2.0.
!     # But -lsocket is broken on IRIX, according to simon@lia.di.epfl.ch.
!     if test "`(uname) 2>/dev/null`" != IRIX; then
!       echo $ac_n "checking for -lsocket""... $ac_c" 1>&4
! if eval "test \"`echo '${'ac_cv_lib_socket'+set}'`\" = set"; then
!   echo $ac_n "(cached) $ac_c" 1>&4
! else
!   ac_save_LIBS="$LIBS"
! LIBS="$LIBS -lsocket "
! cat > conftest.$ac_ext <<EOF
! #line 2040 "configure"
! #include "confdefs.h"
  
+ int main() { return 0; }
+ int t() {
+ socket()
+ ; return 0; }
+ EOF
+ if eval $ac_link; then
+   rm -rf conftest*
+   eval "ac_cv_lib_socket=yes"
+ else
+   rm -rf conftest*
+   eval "ac_cv_lib_socket=no"
  fi
  rm -f conftest*
! LIBS="$ac_save_LIBS"
! 
! fi
! if eval "test \"`echo '$ac_cv_lib_'socket`\" = yes"; then
!   echo "$ac_t""yes" 1>&4
!   X_EXTRA_LIBS="$X_EXTRA_LIBS -lsocket"
  else
!   echo "$ac_t""no" 1>&4
  fi
  
+     fi
    fi
! fi
! 
!   wlibs="-lXt $X_PRE_LIBS -lX11 $wlibs"
    (cd $srcdir/mf/MFwindow; rm -f x11.c; $LN_S x11-Xt.c x11.c)
  fi
! if test $X10WIN = yes; then
    wlibs="-lX $wlibs"
  fi
! if test $SUNWIN = yes; then
    wlibs="-lsuntool -lsunwindow -lpixrect $wlibs"
    (cd $srcdir/mf/MFwindow; rm -f sun.c; $LN_S sun-sunview.c sun.c)
***************
*** 1209,1316 ****
  
  
! echo checking for small TeX/MF/BibTeX
! # Do TeX first.
! # If `small' version is not wanted, do nothing -- make will copy the
! # default change file.
! cat > conftest.c <<EOF
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifndef SMALLTeX
! #include <nonexistxyz.kkk>
  #endif
  
  EOF
! err=`eval "($CPP conftest.c >/dev/null) 2>&1"`
! if test -z "$err"; then
    rm -rf conftest*
!   SMALLTeX=t
! 
! 
  fi
  rm -f conftest*
! if test -n "$SMALLTeX"; then
!   echo "(small TeX, creating tex/ctex.ch)"
    (cd $srcdir/tex && rm -f ctex.ch && sed -f small.sed <tex.ch >ctex.ch)
!   
! {
! test -n "$verbose" && \
! echo "	defining" GLUERATIO_TYPE to be float
! echo "#define" GLUERATIO_TYPE float >> confdefs.h
! DEFS="$DEFS -DGLUERATIO_TYPE=float"
! SEDDEFS="${SEDDEFS}\${SEDdA}GLUERATIO_TYPE\${SEDdB}GLUERATIO_TYPE\${SEDdC}float\${SEDdD}
! \${SEDuA}GLUERATIO_TYPE\${SEDuB}GLUERATIO_TYPE\${SEDuC}float\${SEDuD}
! \${SEDeA}GLUERATIO_TYPE\${SEDeB}GLUERATIO_TYPE\${SEDeC}float\${SEDeD}
! "
! }
  
  fi
  
! # Metafont next.
! cat > conftest.c <<EOF
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifndef SMALLMF
! #include <nonexistxyz.kkk>
  #endif
  
  EOF
! err=`eval "($CPP conftest.c >/dev/null) 2>&1"`
! if test -z "$err"; then
    rm -rf conftest*
!   SMALLMF=t
! 
! 
  fi
  rm -f conftest*
! if test -n "$SMALLMF"; then
!   echo "(small Metafont, creating mf/cmf.ch)"
    (cd $srcdir/mf && rm -f cmf.ch && sed -f small.sed <mf.ch >cmf.ch)
  fi
  
! # And finally BibTeX.
! cat > conftest.c <<EOF
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifndef SMALLBibTeX
! #include <nonexistxyz.kkk>
  #endif
  
  EOF
! err=`eval "($CPP conftest.c >/dev/null) 2>&1"`
! if test -z "$err"; then
    rm -rf conftest*
!   SMALLBibTeX=t
! 
! 
  fi
  rm -f conftest*
! if test -n "$SMALLBibTeX"; then
!   echo "(small BibTeX, creating bibtex/cbibtex.ch)"
    (cd $srcdir/bibtex \
     && rm -f cbibtex.ch && sed -f small.sed <bibtex.ch >cbibtex.ch)
  fi
  
! # Set default prefixes.
! if test -n "$prefix"; then
!   test -z "$exec_prefix" && exec_prefix='${prefix}'
!   prsub="s%^prefix\\([ 	]*\\)=\\([ 	]*\\).*$%prefix\\1=\\2$prefix%"
! fi
! if test -n "$exec_prefix"; then
!   prsub="$prsub
! s%^exec_prefix\\([ 	]*\\)=\\([ 	]*\\).*$%exec_prefix\\1=\\2$exec_prefix%"
! fi
! # Quote sed substitution magic chars in DEFS.
! cat >conftest.def <<EOF
! $DEFS
! EOF
! escape_ampersand_and_backslash='s%[&\\]%\\&%g'
! DEFS=`sed "$escape_ampersand_and_backslash" <conftest.def`
! rm -f conftest.def
! # Substitute for predefined variables.
! 
! trap 'rm -f config.status; exit 1' 1 3 15
! echo creating config.status
! rm -f config.status
! cat > config.status <<EOF
  #!/bin/sh
  # Generated automatically by configure.
--- 2079,2212 ----
  
  
! echo $ac_n "checking for small TeX""... $ac_c" 1>&4
! cat > conftest.$ac_ext <<EOF
! #line 2084 "configure"
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifdef SMALLTeX
!   yes
  #endif
  
  EOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "yes" >/dev/null 2>&1; then
    rm -rf conftest*
!   SMALLTeX=yes
! else
!   rm -rf conftest*
!   SMALLTeX=no
  fi
  rm -f conftest*
! 
! echo "$ac_t""$SMALLTeX" 1>&4
! if test $SMALLTeX = yes; then
    (cd $srcdir/tex && rm -f ctex.ch && sed -f small.sed <tex.ch >ctex.ch)
!   cat >> confdefs.h <<\EOF
! #define GLUERATIO_TYPE float
! EOF
  
  fi
  
! echo $ac_n "checking for small MF""... $ac_c" 1>&4
! cat > conftest.$ac_ext <<EOF
! #line 2113 "configure"
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifdef SMALLMF
!   yes
  #endif
  
  EOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "yes" >/dev/null 2>&1; then
    rm -rf conftest*
!   SMALLMF=yes
! else
!   rm -rf conftest*
!   SMALLMF=no
  fi
  rm -f conftest*
! 
! echo "$ac_t""$SMALLMF" 1>&4
! if test $SMALLMF = yes; then
    (cd $srcdir/mf && rm -f cmf.ch && sed -f small.sed <mf.ch >cmf.ch)
  fi
  
! echo $ac_n "checking for small BibTeX""... $ac_c" 1>&4
! cat > conftest.$ac_ext <<EOF
! #line 2138 "configure"
  #include "confdefs.h"
  #include "$srcdir/lib/c-auto.h.in"
! #ifdef SMALLBibTeX
!   yes
  #endif
  
  EOF
! if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
!   egrep "yes" >/dev/null 2>&1; then
    rm -rf conftest*
!   SMALLBibTeX=yes
! else
!   rm -rf conftest*
!   SMALLBibTeX=no
  fi
  rm -f conftest*
! 
! echo "$ac_t""$SMALLBibTeX" 1>&4
! if test $SMALLBibTeX = yes; then
    (cd $srcdir/bibtex \
     && rm -f cbibtex.ch && sed -f small.sed <bibtex.ch >cbibtex.ch)
  fi
  
! trap '' 1 2 15
! if test -w $cache_file; then
! echo "updating cache $cache_file"
! cat > $cache_file <<\EOF
! # This file is a shell script that caches the results of configure
! # tests run on this system so they can be shared between configure
! # scripts and configure runs.  It is not useful on other systems.
! # If it contains results you don't want to keep, you may remove or edit it.
! #
! # By default, configure uses ./config.cache as the cache file,
! # creating it if it does not exist already.  You can give configure
! # the --cache-file=FILE option to use a different cache file; that is
! # what configure does when it calls configure scripts in
! # subdirectories, so they share the cache.
! # Giving --cache-file=/dev/null disables caching, for debugging configure.
! # config.status only pays attention to the cache file if you give it the
! # --recheck option to rerun configure.
! #
! EOF
! # Ultrix sh set writes to stderr and can't be redirected directly.
! (set) 2>&1 |
!   sed -n "s/^\([a-zA-Z0-9_]*_cv_[a-zA-Z0-9_]*\)=\(.*\)/: \${\1='\2'}/p" \
!   >> $cache_file
! else
! echo "not updating unwritable cache $cache_file"
! fi
! 
! trap 'rm -fr conftest* confdefs* core $ac_clean_files; exit 1' 1 2 15
! 
! test "x$prefix" = xNONE && prefix=$ac_default_prefix
! # Let make expand exec_prefix.
! test "x$exec_prefix" = xNONE && exec_prefix='${prefix}'
! 
! # Any assignment to VPATH causes Sun make to only execute
! # the first set of double-colon rules, so remove it if not needed.
! # If there is a colon in the path, we need to keep it.
! if test "x$srcdir" = x.; then
!   ac_vpsub='/^[ 	]*VPATH[ 	]*=[^:]*$/d'
! fi
! 
! trap 'rm -f $CONFIG_STATUS conftest*; exit 1' 1 2 15
! 
! DEFS=-DHAVE_CONFIG_H
! 
! # Without the "./", some shells look in PATH for config.status.
! : ${CONFIG_STATUS=./config.status}
! 
! echo creating $CONFIG_STATUS
! rm -f $CONFIG_STATUS
! cat > $CONFIG_STATUS <<EOF
  #!/bin/sh
  # Generated automatically by configure.
***************
*** 1319,1386 ****
  # on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
  #
! # $0 $configure_args
  
! for arg
  do
!   case "\$arg" in
!     -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
!     echo running \${CONFIG_SHELL-/bin/sh} $0 $configure_args
!     exec \${CONFIG_SHELL-/bin/sh} $0 $configure_args ;;
!     *) echo "Usage: config.status --recheck" 2>&1; exit 1 ;;
    esac
  done
  
  trap 'rm -fr Makefile bibtex/Makefile dviutil/Makefile fontutil/Makefile \
  lib/Makefile man/Makefile mf/Makefile mf/MFwindow/Makefile \
! tex/Makefile web/Makefile web2c/Makefile lib/c-auto.h conftest*; exit 1' 1 3 15
! CC='$CC'
! CPP='$CPP'
! INSTALL='$INSTALL'
! INSTALL_PROGRAM='$INSTALL_PROGRAM'
! INSTALL_DATA='$INSTALL_DATA'
! RANLIB='$RANLIB'
! YACC='$YACC'
! LEX='$LEX'
! LEXLIB='$LEXLIB'
! LN_S='$LN_S'
! LEX_OUTPUT_ROOT='$LEX_OUTPUT_ROOT'
! x_include_flags='$x_include_flags'
! x_lib_flags='$x_lib_flags'
! x_extra_libs='$x_extra_libs'
! wlibs='$wlibs'
! LIBS='$LIBS'
! srcdir='$srcdir'
! prefix='$prefix'
! exec_prefix='$exec_prefix'
! prsub='$prsub'
! extrasub='$extrasub'
! EOF
! cat >> config.status <<\EOF
  
! top_srcdir=$srcdir
! 
! CONFIG_FILES=${CONFIG_FILES-"Makefile bibtex/Makefile dviutil/Makefile fontutil/Makefile \
! lib/Makefile man/Makefile mf/Makefile mf/MFwindow/Makefile \
! tex/Makefile web/Makefile web2c/Makefile"}
! for file in .. ${CONFIG_FILES}; do if test "x$file" != x..; then
!   srcdir=$top_srcdir
!   # Remove last slash and all that follows it.  Not all systems have dirname.
!   dir=`echo $file|sed 's%/[^/][^/]*$%%'`
!   if test "$dir" != "$file"; then
!     test "$top_srcdir" != . && srcdir=$top_srcdir/$dir
!     test ! -d $dir && mkdir $dir
!   fi
!   echo creating $file
!   rm -f $file
!   echo "# Generated automatically from `echo $file|sed 's|.*/||'`.in by configure." > $file
!   sed -e "
! $prsub
  $extrasub
  s%@CC@%$CC%g
- s%@CPP@%$CPP%g
- s%@INSTALL@%$INSTALL%g
  s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g
  s%@INSTALL_DATA@%$INSTALL_DATA%g
  s%@RANLIB@%$RANLIB%g
  s%@YACC@%$YACC%g
  s%@LEX@%$LEX%g
--- 2215,2266 ----
  # on host `(hostname || uname -n) 2>/dev/null | sed 1q`:
  #
! # $0 $ac_configure_args
! #
! # Compiler output produced by configure, useful for debugging
! # configure, is in ./config.log if it exists.
  
! ac_cs_usage="Usage: $CONFIG_STATUS [--recheck] [--version] [--help]"
! for ac_option
  do
!   case "\$ac_option" in
!   -recheck | --recheck | --rechec | --reche | --rech | --rec | --re | --r)
!     echo "running \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion"
!     exec \${CONFIG_SHELL-/bin/sh} $0 $ac_configure_args --no-create --no-recursion ;;
!   -version | --version | --versio | --versi | --vers | --ver | --ve | --v)
!     echo "$CONFIG_STATUS generated by autoconf version 2.1"
!     exit 0 ;;
!   -help | --help | --hel | --he | --h)
!     echo "\$ac_cs_usage"; exit 0 ;;
!   *) echo "\$ac_cs_usage"; exit 1 ;;
    esac
  done
  
+ ac_given_srcdir=$srcdir
+ ac_given_INSTALL="$INSTALL"
+ 
  trap 'rm -fr Makefile bibtex/Makefile dviutil/Makefile fontutil/Makefile \
  lib/Makefile man/Makefile mf/Makefile mf/MFwindow/Makefile \
! tex/Makefile web/Makefile web2c/Makefile lib/c-auto.h conftest*; exit 1' 1 2 15
  
! # Protect against being on the right side of a sed subst in config.status. 
! sed 's/%@/@@/; s/@%/@@/; s/%g$/@g/; /@g$/s/[\\\\&%]/\\\\&/g; 
!  s/@@/%@/; s/@@/@%/; s/@g$/%g/' > conftest.subs <<\CEOF
! $ac_vpsub
  $extrasub
+ s%@CFLAGS@%$CFLAGS%g
+ s%@CPPFLAGS@%$CPPFLAGS%g
+ s%@CXXFLAGS@%$CXXFLAGS%g
+ s%@DEFS@%$DEFS%g
+ s%@LDFLAGS@%$LDFLAGS%g
+ s%@LIBS@%$LIBS%g
+ s%@exec_prefix@%$exec_prefix%g
+ s%@prefix@%$prefix%g
+ s%@program_transform_name@%$program_transform_name%g
+ s%@SET_MAKE@%$SET_MAKE%g
  s%@CC@%$CC%g
  s%@INSTALL_PROGRAM@%$INSTALL_PROGRAM%g
  s%@INSTALL_DATA@%$INSTALL_DATA%g
  s%@RANLIB@%$RANLIB%g
+ s%@CPP@%$CPP%g
  s%@YACC@%$YACC%g
  s%@LEX@%$LEX%g
***************
*** 1388,1493 ****
  s%@LN_S@%$LN_S%g
  s%@LEX_OUTPUT_ROOT@%$LEX_OUTPUT_ROOT%g
! s%@x_include_flags@%$x_include_flags%g
! s%@x_lib_flags@%$x_lib_flags%g
! s%@x_extra_libs@%$x_extra_libs%g
  s%@wlibs@%$wlibs%g
! s%@LIBS@%$LIBS%g
  s%@srcdir@%$srcdir%g
! s%@DEFS@%-DHAVE_CONFIG_H%" $top_srcdir/${file}.in >> $file
  fi; done
  
  CONFIG_HEADERS=${CONFIG_HEADERS-"lib/c-auto.h"}
! for file in .. ${CONFIG_HEADERS}; do if test "x$file" != x..; then
! echo creating $file
  
- # These sed commands are put into SEDDEFS when defining a macro.
- # They are broken into pieces to make the sed script easier to manage.
- # They are passed to sed as "A NAME B NAME C VALUE D", where NAME
- # is the cpp macro being defined and VALUE is the value it is being given.
- # Each defining turns into a single global substitution command.
- #
- # SEDd sets the value in "#define NAME VALUE" lines.
- SEDdA='s@^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
- SEDdB='\([ 	][ 	]*\)[^ 	]*@\1#\2'
- SEDdC='\3'
- SEDdD='@g'
- # SEDu turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
- SEDuA='s@^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
- SEDuB='\([ 	]\)@\1#\2define\3'
- SEDuC=' '
- SEDuD='\4@g'
- # SEDe turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
- SEDeA='s@^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
- SEDeB='$@\1#\2define\3'
- SEDeC=' '
- SEDeD='@g'
- rm -f conftest.sed
- EOF
- # Turn off quoting long enough to insert the sed commands.
- rm -f conftest.sh
- cat > conftest.sh <<EOF
- $SEDDEFS
  EOF
  
! # Break up $SEDDEFS (now in conftest.sh) because some shells have a limit
! # on the size of here documents.
  
  # Maximum number of lines to put in a single here document.
! maxshlines=9
  
  while :
  do
!   # wc gives bogus results for an empty file on some systems.
!   lines=`grep -c . conftest.sh`
!   if test -z "$lines" || test "$lines" -eq 0; then break; fi
!   rm -f conftest.s1 conftest.s2
!   sed ${maxshlines}q conftest.sh > conftest.s1 # Like head -20.
!   sed 1,${maxshlines}d conftest.sh > conftest.s2 # Like tail +21.
!   # Write a limited-size here document to append to conftest.sed.
!   echo 'cat >> conftest.sed <<CONFEOF' >> config.status
!   cat conftest.s1 >> config.status
!   echo 'CONFEOF' >> config.status
!   rm -f conftest.s1 conftest.sh
!   mv conftest.s2 conftest.sh
  done
! rm -f conftest.sh
  
! # Now back to your regularly scheduled config.status.
! cat >> config.status <<\EOF
! # This sed command replaces #undef's with comments.  This is necessary, for
! # example, in the case of _POSIX_SOURCE, which is predefined and required
! # on some systems where configure will not decide to define it in
! # lib/c-auto.h.
! cat >> conftest.sed <<\CONFEOF
! s,^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*,/* & */,
! CONFEOF
! rm -f conftest.h
! # Break up the sed commands because old seds have small limits.
! maxsedlines=20
! cp $top_srcdir/$file.in conftest.h1
! while :
! do
!   lines=`grep -c . conftest.sed`
!   if test -z "$lines" || test "$lines" -eq 0; then break; fi
!   rm -f conftest.s1 conftest.s2 conftest.h2
!   sed ${maxsedlines}q conftest.sed > conftest.s1 # Like head -20.
!   sed 1,${maxsedlines}d conftest.sed > conftest.s2 # Like tail +21.
!   sed -f conftest.s1 < conftest.h1 > conftest.h2
!   rm -f conftest.s1 conftest.h1 conftest.sed
!   mv conftest.h2 conftest.h1
!   mv conftest.s2 conftest.sed
! done
! rm -f conftest.sed conftest.h
! echo "/* $file.  Generated automatically by configure.  */" > conftest.h
! cat conftest.h1 >> conftest.h
! rm -f conftest.h1
! if cmp -s $file conftest.h 2>/dev/null; then
!   # The file exists and we would not be changing it.
!   echo "$file is unchanged"
!   rm -f conftest.h
! else
!   rm -f $file
!   mv conftest.h $file
! fi
  fi; done
  
--- 2268,2458 ----
  s%@LN_S@%$LN_S%g
  s%@LEX_OUTPUT_ROOT@%$LEX_OUTPUT_ROOT%g
! s%@X_CFLAGS@%$X_CFLAGS%g
! s%@X_PRE_LIBS@%$X_PRE_LIBS%g
! s%@X_LIBS@%$X_LIBS%g
! s%@X_EXTRA_LIBS@%$X_EXTRA_LIBS%g
  s%@wlibs@%$wlibs%g
! 
! CEOF
! EOF
! cat >> $CONFIG_STATUS <<EOF
! 
! CONFIG_FILES=\${CONFIG_FILES-"Makefile bibtex/Makefile dviutil/Makefile fontutil/Makefile \
! lib/Makefile man/Makefile mf/Makefile mf/MFwindow/Makefile \
! tex/Makefile web/Makefile web2c/Makefile"}
! EOF
! cat >> $CONFIG_STATUS <<\EOF
! for ac_file in .. $CONFIG_FILES; do if test "x$ac_file" != x..; then
!   # Support "outfile[:infile]", defaulting infile="outfile.in".
!   case "$ac_file" in
!   *:*) ac_file_in=`echo "$ac_file"|sed 's%.*:%%'`
!        ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
!   *) ac_file_in="${ac_file}.in" ;;
!   esac
! 
!   # Adjust relative srcdir, etc. for subdirectories.
! 
!   # Remove last slash and all that follows it.  Not all systems have dirname.
!   ac_dir=`echo $ac_file|sed 's%/[^/][^/]*$%%'`
!   if test "$ac_dir" != "$ac_file" && test "$ac_dir" != .; then
!     # The file is in a subdirectory.
!     test ! -d "$ac_dir" && mkdir "$ac_dir"
!     ac_dir_suffix="/$ac_dir"
!     # A "../" for each directory in $ac_dir_suffix.
!     ac_dots=`echo $ac_dir_suffix|sed 's%/[^/]*%../%g'`
!   else
!     ac_dir_suffix= ac_dots=
!   fi
! 
!   case "$ac_given_srcdir" in
!   .)  srcdir=.
!       if test -z "$ac_dots"; then top_srcdir=.
!       else top_srcdir=`echo $ac_dots|sed 's%/$%%'`; fi ;;
!   /*) srcdir="$ac_given_srcdir$ac_dir_suffix"; top_srcdir="$ac_given_srcdir" ;;
!   *) # Relative path.
!     srcdir="$ac_dots$ac_given_srcdir$ac_dir_suffix"
!     top_srcdir="$ac_dots$ac_given_srcdir" ;;
!   esac
! 
!   case "$ac_given_INSTALL" in
!   [/$]*) INSTALL="$ac_given_INSTALL" ;;
!   *) INSTALL="$ac_dots$ac_given_INSTALL" ;;
!   esac
!   echo creating "$ac_file"
!   rm -f "$ac_file"
!   configure_input="Generated automatically from `echo $ac_file_in|sed 's%.*/%%'` by configure."
!   case "$ac_file" in
!   *Makefile*) ac_comsub="1i\\
! # $configure_input" ;;
!   *) ac_comsub= ;;
!   esac
!   # Replace lines of the form ac_include foo with the contents of foo:
!   # first, from the ac_include lines construct a list of sed
!   # commands to remove them, and include the files; then run sed.
!   # Have to use sed because old (Ultrix, SunOS) awk does not support
!   # getline or system. (Anyway, configure scripts aren't supposed to use awk.)
!   # Use \@...@<cmd> form of sed address because the filename may contain /.
!   # Can't use only one -e and commands {dr foo} because foo has to be last.
!   # Use @e initially instead of -e because GNU echo has a -e option.
!   # USe `X' to mean a bunch of backslashes; this is for FreeBSD.
!   file_substs=`sed -n \
! "/^ac_include/s%ac_include[ 	]*\(.*\)%@e 'X@^&@r \1' -e 'X@^&@d'%p" \
!                $ac_given_srcdir/${ac_file}.in`
!   if test -n "$file_substs"; then
!     # Change @e back to -e and X@^ to \@^.
!     file_subst_cmd="sed `echo $file_substs \
!                          | sed -e 's/@e/-e/g' -e 's/X@^/\\\\\@^/g'`"
!   else
!     # If no substitutions and hence no sed commands, don't choke.
!     file_subst_cmd=cat
!   fi
!   # cd into the srcdir because the files being included more or less
!   # must be part of the distribution. I can't find any way to do
!   # variable substitution in the sed commands (so the user could have,
!   # e.g., $top_srcdir in their ac_include line).
!   (cd $ac_given_srcdir && eval $file_subst_cmd ${ac_file}.in) \
!   | sed -e "$ac_comsub
! s%@configure_input@%$configure_input%g
  s%@srcdir@%$srcdir%g
! s%@top_srcdir@%$top_srcdir%g
! s%@INSTALL@%$INSTALL%g
! " -f conftest.subs > $ac_file
  fi; done
+ rm -f conftest.subs
+ 
+ # These sed commands are passed to sed as "A NAME B NAME C VALUE D", where
+ # NAME is the cpp macro being defined and VALUE is the value it is being given.
+ #
+ # ac_d sets the value in "#define NAME VALUE" lines.
+ ac_dA='s%^\([ 	]*\)#\([ 	]*define[ 	][ 	]*\)'
+ ac_dB='\([ 	][ 	]*\)[^ 	]*%\1#\2'
+ ac_dC='\3'
+ ac_dD='%g'
+ # ac_u turns "#undef NAME" with trailing blanks into "#define NAME VALUE".
+ ac_uA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
+ ac_uB='\([ 	]\)%\1#\2define\3'
+ ac_uC=' '
+ ac_uD='\4%g'
+ # ac_e turns "#undef NAME" without trailing blanks into "#define NAME VALUE".
+ ac_eA='s%^\([ 	]*\)#\([ 	]*\)undef\([ 	][ 	]*\)'
+ ac_eB='$%\1#\2define\3'
+ ac_eC=' '
+ ac_eD='%g'
  
  CONFIG_HEADERS=${CONFIG_HEADERS-"lib/c-auto.h"}
! for ac_file in .. $CONFIG_HEADERS; do if test "x$ac_file" != x..; then
!   # Support "outfile[:infile]", defaulting infile="outfile.in".
!   case "$ac_file" in
!   *:*) ac_file_in=`echo "$ac_file"|sed 's%.*:%%'`
!        ac_file=`echo "$ac_file"|sed 's%:.*%%'` ;;
!   *) ac_file_in="${ac_file}.in" ;;
!   esac
! 
!   echo creating $ac_file
! 
!   rm -f conftest.frag conftest.in conftest.out
!   cp $ac_given_srcdir/$ac_file_in conftest.in
  
  EOF
  
! # Transform confdefs.h into a sed script conftest.vals that substitutes
! # the proper values into config.h.in to produce config.h.  And first:
! # Protect against being on the right side of a sed subst in config.status. 
! # Protect against being in an unquoted here document in config.status.
! rm -f conftest.vals
! cat > conftest.hdr <<\EOF
! s/[\\&%]/\\&/g
! s%[\\$`]%\\&%g
! s%#define \([A-Za-z_][A-Za-z0-9_]*\) \(.*\)%${ac_dA}\1${ac_dB}\1${ac_dC}\2${ac_dD}%gp
! s%ac_d%ac_u%gp
! s%ac_u%ac_e%gp
! EOF
! sed -n -f conftest.hdr confdefs.h > conftest.vals
! rm -f conftest.hdr
! 
! # This sed command replaces #undef with comments.  This is necessary, for
! # example, in the case of _POSIX_SOURCE, which is predefined and required
! # on some systems where configure will not decide to define it.
! cat >> conftest.vals <<\EOF
! s%^[ 	]*#[ 	]*undef[ 	][ 	]*[a-zA-Z_][a-zA-Z_0-9]*%/* & */%
! EOF
  
+ # Break up conftest.vals because some shells have a limit on
+ # the size of here documents, and old seds have small limits too.
  # Maximum number of lines to put in a single here document.
! ac_max_here_lines=12
  
+ rm -f conftest.tail
  while :
  do
!   ac_lines=`grep -c . conftest.vals`
!   # grep -c gives empty output for an empty file on some AIX systems.
!   if test -z "$ac_lines" || test "$ac_lines" -eq 0; then break; fi
!   # Write a limited-size here document to conftest.frag.
!   echo '  cat > conftest.frag <<CEOF' >> $CONFIG_STATUS
!   sed ${ac_max_here_lines}q conftest.vals >> $CONFIG_STATUS
!   echo 'CEOF
!   sed -f conftest.frag conftest.in > conftest.out
!   rm -f conftest.in
!   mv conftest.out conftest.in
! ' >> $CONFIG_STATUS
!   sed 1,${ac_max_here_lines}d conftest.vals > conftest.tail
!   rm -f conftest.vals
!   mv conftest.tail conftest.vals
  done
! rm -f conftest.vals
  
! cat >> $CONFIG_STATUS <<\EOF
!   rm -f conftest.frag conftest.h
!   echo "/* $ac_file.  Generated automatically by configure.  */" > conftest.h
!   cat conftest.in >> conftest.h
!   rm -f conftest.in
!   if cmp -s $ac_file conftest.h 2>/dev/null; then
!     echo "$ac_file is unchanged"
!     rm -f conftest.h
!   else
!     rm -f $ac_file
!     mv conftest.h $ac_file
!   fi
  fi; done
  
***************
*** 1496,1500 ****
  exit 0
  EOF
! chmod +x config.status
! ${CONFIG_SHELL-/bin/sh} config.status
  
--- 2461,2466 ----
  exit 0
  EOF
! chmod +x $CONFIG_STATUS
! rm -fr confdefs* $ac_clean_files
! test "$no_create" = yes || ${CONFIG_SHELL-/bin/sh} $CONFIG_STATUS
  
*** web2c/lib/c-auto.h.in.save	Tue Feb  1 12:28:36 1994
--- web2c/lib/c-auto.h.in	Thu Jan  5 15:05:45 1995
***************
*** 142,145 ****
--- 142,163 ----
  /* Define as `float' if making a ``small'' TeX.  */
  #undef GLUERATIO_TYPE
+ 
+ /* Define if your putenv doesn't waste space when the same environment
+    variable is assigned more than once, with different (malloced)
+    values.  This is true only on NetBSD/FreeBSD, as far as I know. See
+    xputenv.c.  */
+ #undef SMART_PUTENV
+ 
+ /* Define if you are using GNU libc or otherwise have global variables
+    `program_invocation_name' and `program_invocation_short_name'.  */
+ #undef HAVE_PROGRAM_INVOCATION_NAME
+ 
+ /* Define if you get clashes concerning wchar_t, between X's include
+    files and system includes.  */
+ #undef FOIL_X_WCHAR_T
+ 
+ /* Define if you have SIGIO, F_SETOWN, and FASYNC.  */
+ #undef HAVE_SIGIO
+ 
  /* Below here generated by autoheader.  */
  /* c-auto.h.in.  Generated automatically from configure.in by autoheader.  */
***************
*** 148,166 ****
  #undef __CHAR_UNSIGNED__
  
  /* Define to empty if the keyword does not work.  */
  #undef const
  
- /* Define as the proper declaration for yytext.  */
- #undef DECLARE_YYTEXT
- 
- /* Define if you have dirent.h.  */
- #undef DIRENT
- 
  /* Define if long int is 64 bits.  */
  #undef LONG_64_BITS
  
- /* Define if you don't have dirent.h, but have ndir.h.  */
- #undef NDIR
- 
  /* Define if you need to in order for stat and other things to work.  */
  #undef _POSIX_SOURCE
--- 166,178 ----
  #undef __CHAR_UNSIGNED__
  
+ /* Define if the closedir function returns void instead of int.  */
+ #undef CLOSEDIR_VOID
+ 
  /* Define to empty if the keyword does not work.  */
  #undef const
  
  /* Define if long int is 64 bits.  */
  #undef LONG_64_BITS
  
  /* Define if you need to in order for stat and other things to work.  */
  #undef _POSIX_SOURCE
***************
*** 172,192 ****
  #undef STDC_HEADERS
  
- /* Define if you don't have dirent.h, but have sys/dir.h.  */
- #undef SYSDIR
- 
- /* Define if you don't have dirent.h, but have sys/ndir.h.  */
- #undef SYSNDIR
- 
- /* Define if the closedir function returns void instead of int.  */
- #undef VOID_CLOSEDIR
- 
  /* Define if your processor stores words with the most significant
     byte first (like Motorola and SPARC, unlike Intel and VAX).  */
  #undef WORDS_BIGENDIAN
  
! /* Define if you have memmove.  */
  #undef HAVE_MEMMOVE
  
! /* Define if you have putenv.  */
  #undef HAVE_PUTENV
  
--- 184,204 ----
  #undef STDC_HEADERS
  
  /* Define if your processor stores words with the most significant
     byte first (like Motorola and SPARC, unlike Intel and VAX).  */
  #undef WORDS_BIGENDIAN
  
! /* Define if lex declares yytext as a char * by default, not a char[].  */
! #undef YYTEXT_POINTER
! 
! /* Define if you have the basename function.  */
! #undef HAVE_BASENAME
! 
! /* Define if you have the bcopy function.  */
! #undef HAVE_BCOPY
! 
! /* Define if you have the memmove function.  */
  #undef HAVE_MEMMOVE
  
! /* Define if you have the putenv function.  */
  #undef HAVE_PUTENV
  
***************
*** 194,197 ****
--- 206,212 ----
  #undef HAVE_ASSERT_H
  
+ /* Define if you have the <dirent.h> header file.  */
+ #undef HAVE_DIRENT_H
+ 
  /* Define if you have the <float.h> header file.  */
  #undef HAVE_FLOAT_H
***************
*** 203,206 ****
--- 218,224 ----
  #undef HAVE_MEMORY_H
  
+ /* Define if you have the <ndir.h> header file.  */
+ #undef HAVE_NDIR_H
+ 
  /* Define if you have the <pwd.h> header file.  */
  #undef HAVE_PWD_H
***************
*** 212,233 ****
  #undef HAVE_STRING_H
  
! /* Define if you have the <unistd.h> header file.  */
! #undef HAVE_UNISTD_H
! 
! /* Define if you have the Xext library (-lXext).  */
! #undef HAVE_LIBXEXT
! 
! /* Define if you have the Xt library (-lXt).  */
! #undef HAVE_LIBXT
  
! /* Define if you have the dnet library (-ldnet).  */
! #undef HAVE_LIBDNET
  
! /* Define if you have the dnet_stub library (-ldnet_stub).  */
! #undef HAVE_LIBDNET_STUB
! 
! /* Define if you have the fl library (-lfl).  */
! #undef HAVE_LIBFL
  
! /* Define if you have the socket library (-lsocket).  */
! #undef HAVE_LIBSOCKET
--- 230,246 ----
  #undef HAVE_STRING_H
  
! /* Define if you have the <sys/dir.h> header file.  */
! #undef HAVE_SYS_DIR_H
  
! /* Define if you have the <sys/ndir.h> header file.  */
! #undef HAVE_SYS_NDIR_H
  
! /* Define if you have the <unistd.h> header file.  */
! #undef HAVE_UNISTD_H
  
! /* Retrofit needed by the sources, which still use DECLARE_YYTEXT.  */
! #if YYTEXT_POINTER
! #define DECLARE_YYTEXT extern char *yytext;
! #else
! #define DECLARE_YYTEXT extern char yytext[];
! #endif
*** web2c/lib/main.c.save	Tue May 25 11:41:19 1993
--- web2c/lib/main.c	Fri Sep 23 15:48:40 1994
***************
*** 28,31 ****
--- 28,32 ----
    argc = ac;
    gargv = av;
+   kpse_set_progname(av[0]);
    main_body ();
    return EXIT_SUCCESS;
*** web2c/lib/openinout.c.save	Sat Dec  4 13:01:52 1993
--- web2c/lib/openinout.c	Wed Sep 28 16:26:41 1994
***************
*** 125,128 ****
--- 125,131 ----
      kpse_file_format_type format;
  {
+   static boolean kpathsea_dpi_set = 0;
+   static boolean maketex_base_dpi_set = 0;
+ 
    string found;
    /* Since & is a no-op when applied to an array, we must put the
***************
*** 130,133 ****
--- 133,149 ----
    string name = nameoffile;
    
+   if (!kpathsea_dpi_set)
+     {
+       if (!getenv ("KPATHSEA_DPI"))
+ 	xputenv_int ("KPATHSEA_DPI", 300);
+       kpathsea_dpi_set = 1;
+     }
+   if (!maketex_base_dpi_set)
+     {
+       if (!getenv ("MAKETEX_BASE_DPI"))
+ 	xputenv_int ("MAKETEX_BASE_DPI", 300);
+       maketex_base_dpi_set = 1;
+     }
+ 
    make_c_string (&name);
    found = kpse_make_tex (format, name);
*** web2c/lib/ourpaths.c.save	Sun Dec  5 12:48:44 1993
--- web2c/lib/ourpaths.c	Fri Oct 28 21:42:19 1994
***************
*** 3,14 ****
  #include "config.h"
  
! #include <kpathsea/filefmt.h>
  #include <kpathsea/fontmap.h>
  #include <kpathsea/pathsearch.h>
! 
  
  /* `path_dirs' is initialized in `setpaths', to a null-terminated array
     of directories to search for.  */
! static string path_dirs[LAST_PATH];
  
  
--- 3,17 ----
  #include "config.h"
  
! #include <kpathsea/cnf.h>
! #include <kpathsea/default.h>
! #include <kpathsea/expand.h>
  #include <kpathsea/fontmap.h>
+ #include <kpathsea/paths.h>
  #include <kpathsea/pathsearch.h>
! #include <kpathsea/tex-file.h>
  
  /* `path_dirs' is initialized in `setpaths', to a null-terminated array
     of directories to search for.  */
! static const_string path_dirs[LAST_PATH];
  
  
***************
*** 23,60 ****
  {
    if (path_bits & BIBINPUTPATHBIT)
!     path_dirs[BIBINPUTPATH] = KPSE_BIB_PATH ();
  
    if (path_bits & BSTINPUTPATHBIT)
!     path_dirs[BSTINPUTPATH] = KPSE_BST_PATH ();
  
    if (path_bits & GFFILEPATHBIT)
!     path_dirs[GFFILEPATH] = KPSE_GF_PATH ();
  
    if (path_bits & MFBASEPATHBIT)
!     path_dirs[MFBASEPATH] = KPSE_BASE_PATH ();
  
    if (path_bits & MFINPUTPATHBIT)
!     path_dirs[MFINPUTPATH] = KPSE_MF_PATH ();
  
    if (path_bits & MFPOOLPATHBIT)
!     path_dirs[MFPOOLPATH] = KPSE_MFPOOL_PATH ();
  
    if (path_bits & PKFILEPATHBIT)
!     path_dirs[PKFILEPATH] = KPSE_PK_PATH ();
  
    if (path_bits & TEXFORMATPATHBIT)
!     path_dirs[TEXFORMATPATH] = KPSE_FMT_PATH ();
  
    if (path_bits & TEXINPUTPATHBIT)
!     path_dirs[TEXINPUTPATH] = KPSE_TEX_PATH ();
  
    if (path_bits & TEXPOOLPATHBIT)
!     path_dirs[TEXPOOLPATH] = KPSE_TEXPOOL_PATH ();
  
    if (path_bits & TFMFILEPATHBIT)
!     path_dirs[TFMFILEPATH] = KPSE_TFM_PATH ();
  
    if (path_bits & VFFILEPATHBIT)
!     path_dirs[VFFILEPATH] = KPSE_VF_PATH ();
  }
  
--- 26,63 ----
  {
    if (path_bits & BIBINPUTPATHBIT)
!     path_dirs[BIBINPUTPATH] = kpse_init_format (kpse_bib_format);
  
    if (path_bits & BSTINPUTPATHBIT)
!     path_dirs[BSTINPUTPATH] = kpse_init_format (kpse_bst_format);
  
    if (path_bits & GFFILEPATHBIT)
!     path_dirs[GFFILEPATH] = kpse_init_format (kpse_gf_format);
  
    if (path_bits & MFBASEPATHBIT)
!     path_dirs[MFBASEPATH] = kpse_init_format (kpse_base_format);
  
    if (path_bits & MFINPUTPATHBIT)
!     path_dirs[MFINPUTPATH] = kpse_init_format (kpse_mf_format);
  
    if (path_bits & MFPOOLPATHBIT)
!     path_dirs[MFPOOLPATH] = kpse_init_format (kpse_mfpool_format);
  
    if (path_bits & PKFILEPATHBIT)
!     path_dirs[PKFILEPATH] = kpse_init_format (kpse_pk_format);
  
    if (path_bits & TEXFORMATPATHBIT)
!     path_dirs[TEXFORMATPATH] = kpse_init_format (kpse_fmt_format);
  
    if (path_bits & TEXINPUTPATHBIT)
!     path_dirs[TEXINPUTPATH] = kpse_init_format (kpse_tex_format);
  
    if (path_bits & TEXPOOLPATHBIT)
!     path_dirs[TEXPOOLPATH] = kpse_init_format (kpse_texpool_format);
  
    if (path_bits & TFMFILEPATHBIT)
!     path_dirs[TFMFILEPATH] = kpse_init_format (kpse_tfm_format);
  
    if (path_bits & VFFILEPATHBIT)
!     path_dirs[VFFILEPATH] = kpse_init_format (kpse_vf_format);
  }
  
***************
*** 72,76 ****
  {
    string found;  
!   string path = path_dirs[path_index];
    
    make_c_string (&name);
--- 75,79 ----
  {
    string found;  
!   const_string path = path_dirs[path_index];
    
    make_c_string (&name);
***************
*** 79,83 ****
       have the dpi available separately, and anyway we don't care about
       having pktogf run MakeTeXPK, etc.  */
!   found = kpse_path_search (path, name);
  
    /* If we didn't find it, and we're looking for a font, maybe it's
--- 82,86 ----
       have the dpi available separately, and anyway we don't care about
       having pktogf run MakeTeXPK, etc.  */
!   found = kpse_path_search (path, name, true);
  
    /* If we didn't find it, and we're looking for a font, maybe it's
***************
*** 89,96 ****
      {
        string *mapped_names;
!       static map_type fontmap = NULL;
        
        /* Fault in the mapping if necessary.  */
!       if (!fontmap)
          fontmap = map_create (path);
        
--- 92,99 ----
      {
        string *mapped_names;
!       static hash_table_type fontmap = { NULL, 0 };
        
        /* Fault in the mapping if necessary.  */
!       if (fontmap.size == 0)
          fontmap = map_create (path);
        
***************
*** 102,106 ****
            while ((mapped_name = *mapped_names++) && !found)
              {
!               found = kpse_path_search (path, mapped_name);
              }
          }
--- 105,109 ----
            while ((mapped_name = *mapped_names++) && !found)
              {
!               found = kpse_path_search (path, mapped_name, true);
              }
          }
*** web2c/lib/texmf.c.save	Sun Dec  5 12:53:01 1993
--- web2c/lib/texmf.c	Fri Sep 23 22:33:56 1994
***************
*** 33,37 ****
  #include <kpathsea/c-ctype.h>
  #include <kpathsea/c-pathch.h>
! #include <kpathsea/tex-make.h>
  
  /* For `struct tm'.  */
--- 33,37 ----
  #include <kpathsea/c-ctype.h>
  #include <kpathsea/c-pathch.h>
! #include <kpathsea/tex-file.h>
  
  /* For `struct tm'.  */
***************
*** 74,77 ****
--- 74,79 ----
    dump_default_length = strlen (dump_default + 1);
  
+   kpse_set_progname(av[0]);
+ 
  #ifndef INI
    if (readyalready != 314159)
***************
*** 99,103 ****
                              || getenv ("USE_MAKETEXMF")
                              || getenv ("MAKETEXMF");
!     KPSE_MAKE_SPEC_ENABLED (kpse_make_specs[kpse_mf_format]) = use_maketexmf;
    }
  #endif /* MF */
--- 101,105 ----
                              || getenv ("USE_MAKETEXMF")
                              || getenv ("MAKETEXMF");
!     kpse_format_info[kpse_mf_format].program_enabled_p = use_maketexmf;
    }
  #endif /* MF */
***************
*** 110,115 ****
                               || getenv ("USE_MAKETEXTFM")
                               || getenv ("MAKETEXTFM");
!     KPSE_MAKE_SPEC_ENABLED (kpse_make_specs[kpse_tex_format]) = use_maketextex;
!     KPSE_MAKE_SPEC_ENABLED (kpse_make_specs[kpse_tfm_format]) = use_maketextfm;
    }
  #endif /* TeX */
--- 112,117 ----
                               || getenv ("USE_MAKETEXTFM")
                               || getenv ("MAKETEXTFM");
!     kpse_format_info[kpse_tex_format].program_enabled_p = use_maketextex;
!     kpse_format_info[kpse_tfm_format].program_enabled_p = use_maketextfm;
    }
  #endif /* TeX */
*** web2c/mf/Makefile.in.save	Thu Feb  3 04:48:35 1994
--- web2c/mf/Makefile.in	Sat Sep 24 02:08:29 1994
***************
*** 46,52 ****
  libs = $(commono) $(LIBS)
  
! x_include_flags = @x_include_flags@
! x_lib_flags = @x_lib_flags@
! x_extra_libs = @x_extra_libs@
  wlibs = @wlibs@
  LIBS = @LIBS@
--- 46,52 ----
  libs = $(commono) $(LIBS)
  
! x_include_flags = @X_CFLAGS@
! x_lib_flags = @X_LIBS@
! x_extra_libs = @X_EXTRA_LIBS@
  wlibs = @wlibs@
  LIBS = @LIBS@
***************
*** 72,77 ****
  # What to pass to submakes.
  makeargs=SHELL='$(SHELL)' CC='$(CC)' CFLAGS='$(CFLAGS)' \
! LDFLAGS='$(LDFLAGS)' LIBS='$(libs)' RANLIB='$(RANLIB)' LN='$(LN)' \
! srcdir=$(srcdir)  
  
  
--- 72,76 ----
  # What to pass to submakes.
  makeargs=SHELL='$(SHELL)' CC='$(CC)' CFLAGS='$(CFLAGS)' \
! LDFLAGS='$(LDFLAGS)' LIBS='$(libs)' RANLIB='$(RANLIB)' LN='$(LN)'
  
  
-- 
End of web2c.kpathsea-2.6.help
